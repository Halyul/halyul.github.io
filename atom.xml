<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Halyul的博客</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://blog.halyul.com/"/>
  <updated>2017-11-25T09:58:00.000Z</updated>
  <id>https://blog.halyul.com/</id>
  
  <author>
    <name>Halyul</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>这里离线不能访问啦！</title>
    <link href="https://blog.halyul.com/posts/offline%20(copy)/"/>
    <id>https://blog.halyul.com/posts/offline (copy)/</id>
    <published>2019-01-11T15:28:15.202Z</published>
    <updated>2017-11-25T09:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>老哥！你现在已经掉线啦！赶紧接回网线再看这个神奇的页面吧！<br><img src="/offline.svg" alt="offline"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;老哥！你现在已经掉线啦！赶紧接回网线再看这个神奇的页面吧！&lt;br&gt;&lt;img src=&quot;/offline.svg&quot; alt=&quot;offline&quot;&gt;&lt;/p&gt;

    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>这里离线不能访问啦！</title>
    <link href="https://blog.halyul.com/posts/offline/"/>
    <id>https://blog.halyul.com/posts/offline/</id>
    <published>2018-12-25T04:21:55.801Z</published>
    <updated>2017-11-25T09:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>老哥！你现在已经掉线啦！赶紧接回网线再看这个神奇的页面吧！<br><img src="/offline.svg" alt="offline"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;老哥！你现在已经掉线啦！赶紧接回网线再看这个神奇的页面吧！&lt;br&gt;&lt;img src=&quot;/offline.svg&quot; alt=&quot;offline&quot;&gt;&lt;/p&gt;

    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>table</title>
    <link href="https://blog.halyul.com/posts/table%20(copy)/"/>
    <id>https://blog.halyul.com/posts/table (copy)/</id>
    <published>2017-09-01T15:00:00.000Z</published>
    <updated>2017-12-13T04:55:42.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Donate"><a href="#Donate" class="headerlink" title="Donate"></a>Donate</h2><p>Hexo-theme-mdui is an GPL V3 licensed open source project and completely free to use.&lt;(￣ˇ￣)/</p>
<p>If you like my theme, star me on Github to encourage me to maintain and develop! (/▽＼)</p>
<p>If you are a kind person, just donate me to <code>force</code> me to maintain and develop! ヽ(✿ﾟ▽ﾟ)ノ</p>
<h2 id="Donate-methods"><a href="#Donate-methods" class="headerlink" title="Donate methods"></a>Donate methods</h2><ul>
<li><p><a href="/images/wap.png">AliPay/WePay</a></p>
</li>
<li><p><a href="https://paypal.me/iHalyul" target="_blank" rel="noopener">Paypal</a></p>
</li>
</ul>
<h2 id="Donate-list"><a href="#Donate-list" class="headerlink" title="Donate list"></a>Donate list</h2><p>If you want to be an Anonymous, please send me an <a href="mainto:i@halyul.com" target="_blank" rel="noopener">email</a> to tell me so.</p>
<p>Current total amount: <code>null</code></p>
<div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable ">
<thead>
<tr>
<th>Donator</th>
<th>Amount</th>
<th>Comment</th>
<th>My replay</th>
</tr>
</thead>
<tbody>
<tr>
<td>undefined</td>
<td>null</td>
<td>undefined</td>
<td>undefined</td>
</tr>
</tbody>
</table></div>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Donate&quot;&gt;&lt;a href=&quot;#Donate&quot; class=&quot;headerlink&quot; title=&quot;Donate&quot;&gt;&lt;/a&gt;Donate&lt;/h2&gt;&lt;p&gt;Hexo-theme-mdui is an GPL V3 licensed open source proj
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>table</title>
    <link href="https://blog.halyul.com/posts/table/"/>
    <id>https://blog.halyul.com/posts/table/</id>
    <published>2017-09-01T15:00:00.000Z</published>
    <updated>2017-12-13T04:55:42.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Donate"><a href="#Donate" class="headerlink" title="Donate"></a>Donate</h2><p>Hexo-theme-mdui is an GPL V3 licensed open source project and completely free to use.&lt;(￣ˇ￣)/</p>
<p>If you like my theme, star me on Github to encourage me to maintain and develop! (/▽＼)</p>
<p>If you are a kind person, just donate me to <code>force</code> me to maintain and develop! ヽ(✿ﾟ▽ﾟ)ノ</p>
<h2 id="Donate-methods"><a href="#Donate-methods" class="headerlink" title="Donate methods"></a>Donate methods</h2><ul>
<li><p><a href="/images/wap.png">AliPay/WePay</a></p>
</li>
<li><p><a href="https://paypal.me/iHalyul" target="_blank" rel="noopener">Paypal</a></p>
</li>
</ul>
<h2 id="Donate-list"><a href="#Donate-list" class="headerlink" title="Donate list"></a>Donate list</h2><p>If you want to be an Anonymous, please send me an <a href="mainto:i@halyul.com" target="_blank" rel="noopener">email</a> to tell me so.</p>
<p>Current total amount: <code>null</code></p>
<div class="mdui-table-fluid theme-post__card__table--flat"><table class="mdui-table mdui-table-hoverable ">
<thead>
<tr>
<th>Donator</th>
<th>Amount</th>
<th>Comment</th>
<th>My replay</th>
</tr>
</thead>
<tbody>
<tr>
<td>undefined</td>
<td>null</td>
<td>undefined</td>
<td>undefined</td>
</tr>
</tbody>
</table></div>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Donate&quot;&gt;&lt;a href=&quot;#Donate&quot; class=&quot;headerlink&quot; title=&quot;Donate&quot;&gt;&lt;/a&gt;Donate&lt;/h2&gt;&lt;p&gt;Hexo-theme-mdui is an GPL V3 licensed open source proj
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>fkshort</title>
    <link href="https://blog.halyul.com/posts/short%20(copy)/"/>
    <id>https://blog.halyul.com/posts/short (copy)/</id>
    <published>2017-07-01T15:00:00.000Z</published>
    <updated>2017-11-25T09:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>fkshort</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;fkshort&lt;/p&gt;

    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>fkshort</title>
    <link href="https://blog.halyul.com/posts/short/"/>
    <id>https://blog.halyul.com/posts/short/</id>
    <published>2017-07-01T15:00:00.000Z</published>
    <updated>2017-11-25T09:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>fkshort</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;fkshort&lt;/p&gt;

    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>hexo-theme-mdui document English version</title>
    <link href="https://blog.halyul.com/posts/mdui-doc-en%20(copy)/"/>
    <id>https://blog.halyul.com/posts/mdui-doc-en (copy)/</id>
    <published>2017-03-23T12:01:00.000Z</published>
    <updated>2017-05-06T05:25:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>This is hexo-theme-mdui document English version<br><a id="more"></a></p>
<p>您可以在<a href="https://blog.halyul.cc/2017/03/23/mdui-doc-cn/" target="_blank" rel="noopener">这里</a>找到中文版本.</p>
<p>I write this theme for my personal use, but if you want to use it too, please clone my theme and follow this document to properly configure it.</p>
<p>This document follows the <code>_config.yml</code> configurations order. If the doc doesn’t mention some configurations, just ignore them, I will remove them in later development.</p>
<h3 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h3><h4 id="Install-the-theme"><a href="#Install-the-theme" class="headerlink" title="Install the theme"></a>Install the theme</h4><p>You need following things：</p>
<ul>
<li>a hexo</li>
<li>my theme</li>
</ul>
<p>The theme just supports <code>git clone</code>, <code>npm install</code> will be supported later (or not supported).</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">git</span> clone https://github.com/Halyul/hexo-theme-mdui.git
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Once you have finished clone, copy the folder to hexo <code>theme</code> foler , and rename to <code>mdui</code></p>
<blockquote>
<p>The folder name can be changed to whatever you want, but needs to match the name below.</p>
</blockquote>
<h4 id="Enable-the-theme"><a href="#Enable-the-theme" class="headerlink" title="Enable the theme"></a>Enable the theme</h4><p>Then open hexo’s <code>_config.yml</code>, find <code>theme</code> and change to folloing name to <code>mdui</code>(or the one you have set just now.)</p>
<p><strong>Then run the following code to install <code>prismjs</code> in the <code>hexo</code> folder to prevent from getting errors when you run hexo</strong></p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> prismjs --save
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Run <code>hexo s --debug</code> in terminal, open <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> to make sure the site is running without any problems.</p>
<h3 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h3><h4 id="location"><a href="#location" class="headerlink" title="location"></a>location</h4><ul>
<li>location: For Mathjax. available option is <code>cn</code>, for the users in China Mainland to access a better cdn service. For users who are not in China Mainland, the theme uses <code>Cloudflare</code> cdn service.</li>
</ul>
<h4 id="style"><a href="#style" class="headerlink" title="style"></a>style</h4><ul>
<li>bg_img: parallax image in <code>archive page</code></li>
<li>avatar: author’s avatar</li>
<li>slogan: author’s slogan/description</li>
<li>hoverable: all the cards can hover or not</li>
</ul>
<h4 id="HTML-Head"><a href="#HTML-Head" class="headerlink" title="HTML Head"></a>HTML Head</h4><p>Here you can set HTML head information.</p>
<ul>
<li>favicon</li>
<li>high_res_favicon: high resolution favicon</li>
<li>high_res_favicon: iOS luncher icon</li>
<li>keywords: website keywords.</li>
</ul>
<h4 id="Color"><a href="#Color" class="headerlink" title="Color"></a>Color</h4><p>Setting up the theme color.</p>
<ul>
<li>primary_color: <a href="(#Primary-colors">Primary color</a></li>
<li>accent_color: <a href="#Accent-colors">Accent color</a></li>
<li>layout: <a href="#Layout">Layout</a></li>
<li><p>random: random color, available options are <code>global</code> (global site random color, namely every time you generate or deploy you blog, every pages’ color in the blog will change to another.) and <code>post</code>(only the post color will change)</p>
<blockquote>
<p>If you define a color in post’s <code>fort-matter</code>, the defined color takes precedence over the random color.<br>for some reasons, when the option is <code>post</code>, the custom pages’ color would change.</p>
</blockquote>
</li>
<li><p>bg_color: Global background color (needs to be set as HEX format)</p>
</li>
</ul>
<p><strong>For now, the Android Chrome status bar color changing does’t support the color with color scale.<br>For some reasons again (lol), please change the space to <code>-</code> when you use the color.<br>eg. <code>deep purple</code> -&gt; <code>deep-purple</code></strong></p>
<h5 id="Primary-colors"><a href="#Primary-colors" class="headerlink" title="Primary colors"></a>Primary colors</h5><p><img src="https://img.shields.io/badge/primary_color-red-%23F44336.svg?style=flat-square&amp;colorB=F44336" alt="red"> <img src="https://img.shields.io/badge/primary_color-pink-%23E91E63.svg?style=flat-square&amp;colorB=E91E63" alt="pink"> <img src="https://img.shields.io/badge/primary_color-purple-%239C27B0.svg?style=flat-square&amp;colorB=9C27B0" alt="purple"> <img src="https://img.shields.io/badge/primary_color-deep_purple-%23673AB7.svg?style=flat-square&amp;colorB=673AB7" alt="deep-purple"> <img src="https://img.shields.io/badge/primary_color-indigo-%233F51B5.svg?style=flat-square&amp;colorB=3F51B5" alt="indigo"> <img src="https://img.shields.io/badge/primary_color-blue-%232196F3.svg?style=flat-square&amp;colorB=2196F3" alt="blue"> <img src="https://img.shields.io/badge/primary_color-light_blue-%2303A9F4.svg?style=flat-square&amp;colorB=03A9F4" alt="light-blue"> <img src="https://img.shields.io/badge/primary_color-cyan-%2300BCD4.svg?style=flat-square&amp;colorB=00BCD4" alt="cyan"> <img src="https://img.shields.io/badge/primary_color-teal-%23009688.svg?style=flat-square&amp;colorB=009688" alt="teal"> <img src="https://img.shields.io/badge/primary_color-green-%234CAF50.svg?style=flat-square&amp;colorB=4CAF50" alt="green"> <img src="https://img.shields.io/badge/primary_color-light_green-%238BC34A.svg?style=flat-square&amp;colorB=8BC34A" alt="light-green"> <img src="https://img.shields.io/badge/primary_color-lime-%23CDDC39.svg?style=flat-square&amp;colorB=CDDC39" alt="lime"> <img src="https://img.shields.io/badge/primary_color-yellow-%23FFEB3B.svg?style=flat-square&amp;colorB=FFEB3B" alt="yellow"> <img src="https://img.shields.io/badge/primary_color-amber-%23FFC107.svg?style=flat-square&amp;colorB=FFC107" alt="amber"> <img src="https://img.shields.io/badge/primary_color-orange-%23FF9800.svg?style=flat-square&amp;colorB=FF9800" alt="orange"> <img src="https://img.shields.io/badge/primary_color-deep_orange-%23FF5722.svg?style=flat-square&amp;colorB=FF5722" alt="deep-orange"> <img src="https://img.shields.io/badge/primary_color-brown-%23795548.svg?style=flat-square&amp;colorB=795548" alt="brown"> <img src="https://img.shields.io/badge/primary_color-grey-%239E9E9E.svg?style=flat-square&amp;colorB=9E9E9E" alt="grey"></p>
<h5 id="Accent-colors"><a href="#Accent-colors" class="headerlink" title="Accent colors"></a>Accent colors</h5><p><img src="https://img.shields.io/badge/accent_color-red-%23FF5252.svg?style=flat-square&amp;colorB=FF5252" alt="red"> <img src="https://img.shields.io/badge/accent_color-pink-%23FF4081.svg?style=flat-square&amp;colorB=FF4081" alt="pink"> <img src="https://img.shields.io/badge/accent_color-purple-%23E040FB.svg?style=flat-square&amp;colorB=E040FB" alt="purple"> <img src="https://img.shields.io/badge/accent_color-deep_purple-%237C4DFF.svg?style=flat-square&amp;colorB=7C4DFF" alt="deep-purple"> <img src="https://img.shields.io/badge/accent_color-indigo-%23536DFE.svg?style=flat-square&amp;colorB=536DFE" alt="indigo"> <img src="https://img.shields.io/badge/accent_color-blue-%23448AFF.svg?style=flat-square&amp;colorB=448AFF" alt="blue"> <img src="https://img.shields.io/badge/accent_color-light_blue-%2340C4FF.svg?style=flat-square&amp;colorB=40C4FF" alt="light-blue"> <img src="https://img.shields.io/badge/accent_color-cyan-%2318FFFF.svg?style=flat-square&amp;colorB=18FFFF" alt="cyan"> <img src="https://img.shields.io/badge/accent_color-teal-%2364FFDA.svg?style=flat-square&amp;colorB=64FFDA" alt="teal"> <img src="https://img.shields.io/badge/accent_color-green-%2369F0AE.svg?style=flat-square&amp;colorB=69F0AE" alt="green"> <img src="https://img.shields.io/badge/accent_color-light_green-%23B2FF59.svg?style=flat-square&amp;colorB=B2FF59" alt="light-green"> <img src="https://img.shields.io/badge/accent_color-lime-%23EEFF41.svg?style=flat-square&amp;colorB=EEFF41" alt="lime"> <img src="https://img.shields.io/badge/accent_color-yellow-%23FFFF00.svg?style=flat-square&amp;colorB=FFFF00" alt="yellow"> <img src="https://img.shields.io/badge/accent_color-amber-%23FFD740.svg?style=flat-square&amp;colorB=FFD740" alt="amber"> <img src="https://img.shields.io/badge/accent_color-orange-%23FFAB40.svg?style=flat-square&amp;colorB=FFAB40" alt="orange"> <img src="https://img.shields.io/badge/accent_color-deep_orange-%23FF6E40.svg?style=flat-square&amp;colorB=FF6E40" alt="deep-orange"></p>
<h5 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h5><p>The theme has two <code>layouts</code>, the default layout is <code>white</code>, you change use the <code>dark</code> layout.</p>
<ul>
<li>layout: “dark”</li>
</ul>
<h4 id="appbar"><a href="#appbar" class="headerlink" title="appbar"></a>appbar</h4><ul>
<li>title: This is the default title in the appbar, it will always show, and will not change or hide, you can leave it blank<blockquote>
<p>Personally, I’m not recommend you leaving it blank, because it provides a go-to-index-page function.<br>you can find a <code>back</code> button in the appbar when you visit some page, this button just provides a return function, which is the as the browser provided.</p>
</blockquote>
</li>
</ul>
<p>Also, the header in the <code>drawer</code> uses this setting.</p>
<h4 id="post"><a href="#post" class="headerlink" title="post"></a>post</h4><ul>
<li>entry_excerpt: how many posts summary words will be displayed in the index page.</li>
<li>qr_code: posts/pages’ qr code, for more information, please click <a href="#QR_CODE">here</a></li>
<li>prism: code highlight<ul>
<li>theme: internal theme setting, including <code>default</code>, <code>coy</code>, <code>dark</code>, <code>funky</code>, <code>okaidia</code>, <code>solarizedlight</code>, <code>tomorrow</code>, <code>twilight</code></li>
<li>line_number: whether show line numbers before the code, available options are <code>true</code> and <code>false</code></li>
</ul>
</li>
<li>donate: post donate, please configure it with the examples. How to use icons please click <a href="#ICONS">here</a></li>
</ul>
<h4 id="share-menu"><a href="#share-menu" class="headerlink" title="share_menu"></a>share_menu</h4><p>Setting uo the share menu. If you don’t need any share options, please remove following contents and set <code>share_menu: false</code></p>
<ul>
<li>rss: article rss, the link is the same as the <code>path</code> in <code>hexo</code> <code>_config.yml</code> under <code>feed</code>, available options are <code>true</code> and <code>false</code>, more detailed click <a href="#RSS">here</a>.</li>
<li>weibo: Sina Weibo, available options are <code>true</code> and <code>false</code></li>
<li>twitter: Twitter, available options are <code>true</code> and <code>false</code></li>
<li>facebook: Facebook, available options are <code>true</code> and <code>false</code></li>
<li>googleplus: Google+, available options are <code>true</code> and <code>false</code></li>
<li>linkedin: Linkedin, available options are <code>true</code> and <code>false</code></li>
<li>qq: QQ, available options are <code>true</code> and <code>false</code></li>
<li>telegram: Telegram, available options are <code>true</code> and <code>false</code></li>
</ul>
<h4 id="comment"><a href="#comment" class="headerlink" title="comment"></a>comment</h4><p>comment service plugin, available options are <code>disqus</code> and <code>custom</code></p>
<ul>
<li>use: <code>disqus</code> or <code>custom</code></li>
<li>shortname: disqus short name, for example, <code>example.disqus.com</code>, so short name is <code>example</code>, if <code>use: custom</code>, this line is unavailable</li>
</ul>
<p>If you want to use the comment service that I haven’t add support, please click <a href="#customComment">here</a> for how to configure</p>
<h4 id="pagination"><a href="#pagination" class="headerlink" title="pagination"></a>pagination</h4><p>Pagination setting</p>
<ul>
<li>show: after how many pages the number will be hidden. eg. the original pagination is <code>1 2 3 4 5 6</code>, then <code>show: 2</code>, the pagination will change to <code>1 2 ... 5 6</code></li>
</ul>
<h4 id="footer"><a href="#footer" class="headerlink" title="footer"></a>footer</h4><ul>
<li><p>since: specify the date when the blog was setup</p>
<blockquote>
<p>I haven’t add a judgement here, it will lead to following problem.<br>If your blog was setup in in 2017, and the year now is 2017, so the copyright will display <code>2017 - 2017</code>, please avoid this.</p>
</blockquote>
</li>
<li><p>ICP: this is for users who are in China Mainland to show his/her ICP number.</p>
</li>
</ul>
<h4 id="pages"><a href="#pages" class="headerlink" title="pages"></a>pages</h4><p>How to use icons please click <a href="#ICONS">here</a></p>
<h5 id="uncategorized-pages"><a href="#uncategorized-pages" class="headerlink" title="uncategorized pages"></a>uncategorized pages</h5><p>Custom pages setting, please follow format which is left in the <code>_config.yml</code> or the one below.</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">Test1</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">link</span><span class="token punctuation">:</span> <span class="token string">"/test1"</span>
  <span class="token punctuation">-</span> <span class="token key atrule">icon</span><span class="token punctuation">:</span> "`&amp;<span class="token comment" spellcheck="true">#xe84d;`"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>These lines will generate an entrance of a link called <code>Test1</code>, links to <code>yoursite.com/test1</code>, and the icon is <code>&amp;#xe84d;</code>.</p>
<h5 id="categorized-pages"><a href="#categorized-pages" class="headerlink" title="categorized pages"></a>categorized pages</h5><p>Custom pages support the pages which belong to the same category to be shown under a section, if you wants to enable it, please configure it with the format that the left in the file.<br><strong>Key option is <code>cascade: true</code></strong></p>
<h4 id="sns"><a href="#sns" class="headerlink" title="sns"></a>sns</h4><p>Here you can set up your contact information, please follow the format that left in the file. How to use icons please click <a href="#ICONS">here</a></p>
<blockquote>
<p>or you can fill <code>false</code> to disable.</p>
</blockquote>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">Twitter</span><span class="token punctuation">:</span>
    <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//twitter.com
    <span class="token key atrule">fa</span><span class="token punctuation">:</span> <span class="token string">'fa-twitter'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="Vendor"><a href="#Vendor" class="headerlink" title="Vendor"></a>Vendor</h3><p>The css and js files haven’t cdn service support, so they are accessed from your server directly. If you have your own cdn service, you can do following configurations.</p>
<ul>
<li>style_min_css: direct address</li>
<li>js_min_js: direct address</li>
<li>outdatedbrowser_min_js: direct address</li>
</ul>
<blockquote>
<p>Through this feature you can modify the css and js.</p>
</blockquote>
<h3 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h3><h4 id="busuanzi"><a href="#busuanzi" class="headerlink" title="busuanzi"></a>busuanzi</h4><p>busuanzi is a plugin to count how many page views and unique visitors.<br>If you don’t need it, please delete following lines and set <code>busuanzi: false</code></p>
<ul>
<li>all_site_uv: All site unique visitors</li>
<li>post_pv: how many times the page has been viewed</li>
<li>busuanzi_pure_mini_js: busuanzi js address, it is hosted in China Mainland.</li>
</ul>
<h4 id="search"><a href="#search" class="headerlink" title="search"></a>search</h4><p>For now, this cant be disabled. Please install <code>hexo-generator-search</code> to prevent errors.</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> hexo-generator-search --save
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>more details can be found <a href="https://github.com/PaicHyperionDev/hexo-generator-search" target="_blank" rel="noopener">here</a></p>
<h4 id="Mathjax"><a href="#Mathjax" class="headerlink" title="Mathjax"></a>Mathjax</h4><p>If your post or page needs <code>Mathjax</code>, please add <code>mathjax: true</code> in the <code>font-matter</code>.</p>
<h3 id="Advanced-settings"><a href="#Advanced-settings" class="headerlink" title="Advanced settings"></a>Advanced settings</h3><h4 id="Custom-css-and-js"><a href="#Custom-css-and-js" class="headerlink" title="Custom css and js"></a>Custom css and js</h4><p>If you want to add some custom code like <code>font-face</code>, <code>Google Analytics</code>, etc., please create a <code>custom</code> folder in the <code>layout</code> folder in theme folder, then create a <code>custom_head.ejs</code> file (the code inside  goes before <code>&lt;/head&gt;</code> ) or a <code>custom_js.ejs</code> file (the code inside  goes before <code>&lt;/body&gt;</code> ) to put your own code.</p>
<h4 id="ICONS"><a href="#ICONS" class="headerlink" title="ICONS"></a>ICONS</h4><p>The theme supports <code>font awesome icons</code> and <code>Material icons</code>.<br>Add <code>fa:</code> to the option that you want to use <code>font awesome icons</code>.</p>
<blockquote>
<p>You can find icons <a href="http://fontawesome.io/icons/" target="_blank" rel="noopener">here</a></p>
</blockquote>
<p>Add <code>md:</code> to the option that you want to use <code>Material icons</code>.</p>
<blockquote>
<p>For icons that support modern browsers, you can find from <a href="https://material.io/icons" target="_blank" rel="noopener">here</a>. When you find the one you need, click it, and copy the characters <strong>after <code>https://material.io/icons/#ic_</code></strong><br>For icons that support all mainstream browsers, you can find from <a href="http://www.mdui.org/docs/material_icon" target="_blank" rel="noopener">here</a>, but the site hasn’t an English version. You can just browse the icon list or search an icon, click the one you need, copy the characters like <code>&amp;#xe84d;</code>.</p>
</blockquote>
<p>Add <code>null_icon: true</code> as a placeholer.</p>
<h4 id="lightgallery"><a href="#lightgallery" class="headerlink" title="lightgallery"></a>lightgallery</h4><p><strong>unspported now</strong><br>Lightgallery is a gallery plugin, you can see what it can do just click the following picture.</p>
<h4 id="RSS"><a href="#RSS" class="headerlink" title="RSS"></a>RSS</h4><p>If you need rss, please install <code>hexo-generator-feed</code></p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> hexo-generator-feed --save
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>more details can be found <a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="noopener">here</a>.</p>
<h4 id="service-worker"><a href="#service-worker" class="headerlink" title="service_worker"></a>service_worker</h4><p>The theme has internal Service Worker support, if you need this feature, please open <code>source/sw.js</code> in the <strong>THEME FOLDER</strong>, and configure <code>ignoreFetch</code> to match your site setting, for more information, please google or yahoo; then, create a <code>offline.md</code> under <code>source</code> in the <strong>HEXO FLODER</strong>, <strong>the format is the same as the hexo markdown</strong></p>
<p>available options are <code>true</code> and <code>pwa</code></p>
<ul>
<li>true: only inject <code>Service Worker</code></li>
<li>pwa: The site supports Google’s <code>Progressive Web Apps</code></li>
</ul>
<p>If you use <code>pwa</code>, please open <code>source/manifest.json</code> in the <strong>THEME FOLDER</strong> to configure, for how to configure please google or yahoo.</p>
<h4 id="archive-page"><a href="#archive-page" class="headerlink" title="archive page"></a>archive page</h4><h5 id="about-me"><a href="#about-me" class="headerlink" title="about_me"></a>about_me</h5><p>This is the <code>about</code> dialog in the <code>archive page</code>. If you need it, please create <code>about.yml</code> under <code>source/_data</code> in the <strong>HEXO FOLDER</strong>, and choose a following format to fill in. You can directly copy and paste to see the style.</p>
<p>Options:</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">slogan</span><span class="token punctuation">:</span> show the slogan/description or not<span class="token punctuation">,</span> available options is `true`<span class="token punctuation">,</span> or just leave it blank.
<span class="token key atrule">others</span><span class="token punctuation">:</span> the text under slogan/description. (these two options are independent)
  <span class="token punctuation">-</span> <span class="token string">'1'</span>
  <span class="token punctuation">-</span> <span class="token string">'2'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>Format 1:</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">hellow</span><span class="token punctuation">:</span>
  <span class="token key atrule">main</span><span class="token punctuation">:</span>
    <span class="token key atrule">hi</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xxxxxx
      <span class="token key atrule">s_img</span><span class="token punctuation">:</span> /img/avatar.png
    <span class="token key atrule">hi1</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xx
      <span class="token key atrule">link</span><span class="token punctuation">:</span> //google.com
      <span class="token key atrule">s_img</span><span class="token punctuation">:</span> /img/favicon.png
    <span class="token key atrule">hi2</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> aaaa
  <span class="token key atrule">more</span><span class="token punctuation">:</span>
    <span class="token key atrule">hi3</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">'561456415341'</span>
      <span class="token key atrule">link</span><span class="token punctuation">:</span> //google.com
      <span class="token key atrule">s_img</span><span class="token punctuation">:</span> /img/favicon.png
    <span class="token key atrule">hi4</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">'xxxxxxx'</span>
      <span class="token key atrule">s_img</span><span class="token punctuation">:</span> /img/favicon.png
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Format 2:</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">hellow1</span><span class="token punctuation">:</span>
  <span class="token key atrule">main</span><span class="token punctuation">:</span>
    <span class="token key atrule">hi</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xxxxxx
      <span class="token key atrule">one_line</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">hi1</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xx
      <span class="token key atrule">fa</span><span class="token punctuation">:</span> <span class="token string">'fa-beer'</span>
    <span class="token key atrule">工作經歷</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xxxx
      <span class="token key atrule">content_1</span><span class="token punctuation">:</span> Designer &amp; Developer，2222
  <span class="token key atrule">more</span><span class="token punctuation">:</span>
    <span class="token key atrule">hi3</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">'1111'</span>
      <span class="token key atrule">one_line</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">s_img</span><span class="token punctuation">:</span> /img/favicon.png
    <span class="token key atrule">hi4</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">'1111'</span>
      <span class="token key atrule">one_line</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">c_img</span><span class="token punctuation">:</span> /img/favicon.png
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Format 3:</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">hellow2</span><span class="token punctuation">:</span>
  <span class="token key atrule">main</span><span class="token punctuation">:</span>
    <span class="token key atrule">hi</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xxxxxx
      <span class="token key atrule">one_line</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">md</span><span class="token punctuation">:</span> <span class="token string">'home'</span>
    <span class="token key atrule">hi1</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xx
      <span class="token key atrule">link</span><span class="token punctuation">:</span> <span class="token string">'xxxx/xxx'</span>
      <span class="token key atrule">fa</span><span class="token punctuation">:</span> <span class="token string">'fa-beer'</span>
    <span class="token key atrule">工作經歷</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xxxx
      <span class="token key atrule">content_1</span><span class="token punctuation">:</span> Designer &amp; Developer，2222
  <span class="token key atrule">more</span><span class="token punctuation">:</span>
    <span class="token key atrule">hi3</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">'1111'</span>
      <span class="token key atrule">one_line</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">null_icon</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">hi4</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">'1111'</span>
      <span class="token key atrule">one_line</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">fa</span><span class="token punctuation">:</span> <span class="token string">'fa-qq'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Some options meaning:</p>
<ul>
<li>one_line: single line content, if this is <code>true</code>, the text in <code>content:</code> will not be rendered.</li>
<li>fa/md/null_icon: How to use icons please click <a href="#ICONS">here</a></li>
<li>content_1: text that below the text from <code>content:</code></li>
<li>link: web address</li>
<li>s_img: square picture that shows before the section content.</li>
<li>c_img: circular picture that shows before the section content.</li>
</ul>
<h5 id="random-pics"><a href="#random-pics" class="headerlink" title="random_pics"></a>random_pics</h5><p>The random pictures on the <code>Categories</code>, <code>Tags</code>, <code>Years</code> in the <code>archive page</code>(defining a certain picture is not supported). Those pictures are stored in <code>source/img/random</code> in the <strong>THEME FOLDER</strong>.<br>If you add picture(s), change the total pictures number.<br><strong>Only `jpg is supported</strong></p>
<h3 id="Post"><a href="#Post" class="headerlink" title="Post"></a>Post</h3><h4 id="QR-CODE"><a href="#QR-CODE" class="headerlink" title="QR_CODE"></a>QR_CODE</h4><p>QR Code for posts and custom pages, available options are <code>true</code> and <code>false</code>, you need to install <code>hexo-helper-qrcode</code> plugin to enbale the feature. Please run following command in terminal in hexo folder.</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> hexo-helper-qrcode --save
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="Thumbnail"><a href="#Thumbnail" class="headerlink" title="Thumbnail"></a>Thumbnail</h4><p>Post and custom page support thumbnail.</p>
<ul>
<li>thumbnail: By using this method, the post thumbnail will be showed between <code>post title</code> and <code>post content</code>.</li>
</ul>
<h4 id="Custom-primary-amp-accent-color-in-post-and-custom-page"><a href="#Custom-primary-amp-accent-color-in-post-and-custom-page" class="headerlink" title="Custom primary &amp;/ accent color in post and custom page"></a>Custom primary &amp;/ accent color in post and custom page</h4><p>When you write post, add <code>primary_color</code> and/or <code>accent_color</code> in the <code>font-matter</code> can change this post’s theme color. Colors name is the same as <a href="#Color">Color</a><br>eg.</p>
<pre class="line-numbers language-markdown" mdui-tooltip="{content: 'markdown'}"><code class="language-markdown">title: This is title
primary_color: grey
<span class="token title important">accent_color: red
<span class="token punctuation">-----------</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="No-comment-No-category-No-tag"><a href="#No-comment-No-category-No-tag" class="headerlink" title="No comment, No category, No tag"></a>No comment, No category, No tag</h4><p>add following content to <code>font-matter</code> to disable comment, disable category, disable tag</p>
<ul>
<li>comment: set it <code>false</code> to disable comment</li>
<li>category: set it <code>false</code> to disable category</li>
<li>tag: set it <code>false</code> to disable tag</li>
</ul>
<h4 id="Pinned-Post"><a href="#Pinned-Post" class="headerlink" title="Pinned Post"></a>Pinned Post</h4><p>Just add <code>pinned: true</code> to <code>font-matter</code> to pin the post to top</p>
<h4 id="customComment"><a href="#customComment" class="headerlink" title="customComment"></a>customComment</h4><p>please open <code>layout/custom/custom_comment.ejs</code> in the theme folder, and paste the comment service code to this file.<br>If the comment service needs you to set the <code>source id (or something like that)</code> of the page, please fill it with <code>&lt;%- config.url + config.root + page.path %&gt;</code></p>
<h3 id="Custom-pages"><a href="#Custom-pages" class="headerlink" title="Custom pages"></a>Custom pages</h3><h4 id="Friends-page"><a href="#Friends-page" class="headerlink" title="Friends page"></a>Friends page</h4><p>Enter the <code>source</code> folder in <code>hexo</code> folder, create a folder with the name you like, then enter it and create a <code>index.md</code> file, fill it with following content</p>
<pre class="line-numbers language-markdown" mdui-tooltip="{content: 'markdown'}"><code class="language-markdown"><span class="token hr punctuation">---</span>
title: MY FRIENDS
layout: friends
<span class="token title important">header: header of friends page, can be left blank
<span class="token punctuation">---</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>then go back to the <code>source</code> folder, enter the <code>_data</code> folder (if there isn’t any, please create one), and create a file called <code>friends.yml</code> (<strong>the name can’t be changed</strong>), using following format to creat links.</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">Example</span><span class="token punctuation">:</span>
    <span class="token key atrule">link</span><span class="token punctuation">:</span> Site address
    <span class="token key atrule">avatar</span><span class="token punctuation">:</span> Avatar
    <span class="token key atrule">descr</span><span class="token punctuation">:</span> Slogan or descrpition
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Gallery"><a href="#Gallery" class="headerlink" title="Gallery"></a>Gallery</h4><p>Gallery supports multi album and single album.</p>
<h5 id="multi-album"><a href="#multi-album" class="headerlink" title="multi album"></a>multi album</h5><p>Create a <code>galleries.yml</code> in <code>source/_data</code> in the <strong>HEXO FOLDER</strong>, and configure it with following format.<br>And add a custom page anywhere in <code>source</code> in the <strong>HEXO FOLDER</strong>, and fill <code>layout: galleries</code></p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml">Albun name<span class="token punctuation">:</span>
  <span class="token key atrule">link</span><span class="token punctuation">:</span> URL
  <span class="token key atrule">descr</span><span class="token punctuation">:</span> album description or something else
  <span class="token key atrule">bg</span><span class="token punctuation">:</span> default image
  <span class="token key atrule">logo</span><span class="token punctuation">:</span> this can be ignored<span class="token punctuation">,</span> a circular image<span class="token punctuation">,</span> configure to see what the style like.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="single-album"><a href="#single-album" class="headerlink" title="single album"></a>single album</h5><p>Please create a custom page anywhere in <code>source</code> in the <strong>HEXO FOLDER</strong>, and fill <code>layout: gallery</code>, <strong>then add <code>photos:</code> with following format in the <code>font-matter</code></strong></p>
<pre class="line-numbers language-markdown" mdui-tooltip="{content: 'markdown'}"><code class="language-markdown">photos:
  x:
<span class="token code keyword">    img: /img/bg.png</span>
<span class="token code keyword">    descr: 'description goes here'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>Configure to see what the style like.</p>
<h3 id="Known-issues"><a href="#Known-issues" class="headerlink" title="Known issues"></a>Known issues</h3><h4 id="Using-hexo-neat-plugin"><a href="#Using-hexo-neat-plugin" class="headerlink" title="Using hexo-neat plugin"></a>Using hexo-neat plugin</h4><p>Because <code>hexo-neat</code> plugin will add note when it neats the files, this will break the Android Chrome status bar color changing, if you want to/ are using this plugin, please do following modifications.</p>
<p>Enter the <code>node_modules</code> folder in the <code>hexo</code> folder, find and enter <code>hexo-neat</code> folder, then enter <code>lib</code> folder, use your editor open <code>filter.js</code>, find following code and <strong>delete</strong></p>
<p><strong>The number of rows for reference only, please seach the code</strong></p>
<p>Line 31, 32</p>
<pre class="line-numbers language-javascript" mdui-tooltip="{content: 'javascript'}"><code class="language-javascript"><span class="token keyword">var</span> prefix <span class="token operator">=</span> <span class="token string">'&lt;!-- build time:'</span> <span class="token operator">+</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" -->"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> end <span class="token operator">=</span> <span class="token string">'&lt;!-- rebuild by neat -->'</span><span class="token punctuation">;</span>
result <span class="token operator">=</span> prefix <span class="token operator">+</span> result <span class="token operator">+</span> end<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Line 58, 59</p>
<pre class="line-numbers language-javascript" mdui-tooltip="{content: 'javascript'}"><code class="language-javascript"><span class="token keyword">var</span> prefix <span class="token operator">=</span> <span class="token string">'/* build time:'</span> <span class="token operator">+</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"*/\n"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> end <span class="token operator">=</span> <span class="token string">'\n/* rebuild by neat */'</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>Line 87, 88</p>
<pre class="line-numbers language-javascript" mdui-tooltip="{content: 'javascript'}"><code class="language-javascript"><span class="token keyword">var</span> prefix <span class="token operator">=</span> <span class="token string">'// build time:'</span> <span class="token operator">+</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> end <span class="token operator">=</span> <span class="token string">'\n//rebuild by neat '</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>Find the following codes and <strong>modify</strong><br><strong>The number of rows for reference only, please seach the code</strong></p>
<p>Line 60</p>
<pre class="line-numbers language-javascript" mdui-tooltip="{content: 'javascript'}"><code class="language-javascript"><span class="token keyword">var</span> css_result <span class="token operator">=</span> prefix <span class="token operator">+</span> result<span class="token punctuation">.</span>styles <span class="token operator">+</span> end<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>change to</p>
<pre class="line-numbers language-javascript" mdui-tooltip="{content: 'javascript'}"><code class="language-javascript"><span class="token keyword">var</span> css_result <span class="token operator">=</span> result<span class="token punctuation">.</span>styles<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Line 89</p>
<pre class="line-numbers language-javascript" mdui-tooltip="{content: 'javascript'}"><code class="language-javascript"><span class="token keyword">var</span> js_result <span class="token operator">=</span> prefix <span class="token operator">+</span> result<span class="token punctuation">.</span>code <span class="token operator">+</span> end<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>change to</p>
<pre class="line-numbers language-javascript" mdui-tooltip="{content: 'javascript'}"><code class="language-javascript"><span class="token keyword">var</span> js_result <span class="token operator">=</span> result<span class="token punctuation">.</span>code<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;This is hexo-theme-mdui document English version&lt;br&gt;
    
    </summary>
    
      <category term="Document" scheme="https://blog.halyul.com/categories/Document/"/>
    
      <category term="xxx" scheme="https://blog.halyul.com/categories/Document/xxx/"/>
    
      <category term="xx" scheme="https://blog.halyul.com/categories/Document/xxx/xx/"/>
    
    
      <category term="Hexo" scheme="https://blog.halyul.com/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>hexo-theme-mdui document English version</title>
    <link href="https://blog.halyul.com/posts/mdui-doc-en/"/>
    <id>https://blog.halyul.com/posts/mdui-doc-en/</id>
    <published>2017-03-23T12:01:00.000Z</published>
    <updated>2017-05-06T05:25:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>This is hexo-theme-mdui document English version<br><a id="more"></a></p>
<p>您可以在<a href="https://blog.halyul.cc/2017/03/23/mdui-doc-cn/" target="_blank" rel="noopener">这里</a>找到中文版本.</p>
<p>I write this theme for my personal use, but if you want to use it too, please clone my theme and follow this document to properly configure it.</p>
<p>This document follows the <code>_config.yml</code> configurations order. If the doc doesn’t mention some configurations, just ignore them, I will remove them in later development.</p>
<h3 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h3><h4 id="Install-the-theme"><a href="#Install-the-theme" class="headerlink" title="Install the theme"></a>Install the theme</h4><p>You need following things：</p>
<ul>
<li>a hexo</li>
<li>my theme</li>
</ul>
<p>The theme just supports <code>git clone</code>, <code>npm install</code> will be supported later (or not supported).</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">git</span> clone https://github.com/Halyul/hexo-theme-mdui.git
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Once you have finished clone, copy the folder to hexo <code>theme</code> foler , and rename to <code>mdui</code></p>
<blockquote>
<p>The folder name can be changed to whatever you want, but needs to match the name below.</p>
</blockquote>
<h4 id="Enable-the-theme"><a href="#Enable-the-theme" class="headerlink" title="Enable the theme"></a>Enable the theme</h4><p>Then open hexo’s <code>_config.yml</code>, find <code>theme</code> and change to folloing name to <code>mdui</code>(or the one you have set just now.)</p>
<p><strong>Then run the following code to install <code>prismjs</code> in the <code>hexo</code> folder to prevent from getting errors when you run hexo</strong></p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> prismjs --save
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Run <code>hexo s --debug</code> in terminal, open <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> to make sure the site is running without any problems.</p>
<h3 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h3><h4 id="location"><a href="#location" class="headerlink" title="location"></a>location</h4><ul>
<li>location: For Mathjax. available option is <code>cn</code>, for the users in China Mainland to access a better cdn service. For users who are not in China Mainland, the theme uses <code>Cloudflare</code> cdn service.</li>
</ul>
<h4 id="style"><a href="#style" class="headerlink" title="style"></a>style</h4><ul>
<li>bg_img: parallax image in <code>archive page</code></li>
<li>avatar: author’s avatar</li>
<li>slogan: author’s slogan/description</li>
<li>hoverable: all the cards can hover or not</li>
</ul>
<h4 id="HTML-Head"><a href="#HTML-Head" class="headerlink" title="HTML Head"></a>HTML Head</h4><p>Here you can set HTML head information.</p>
<ul>
<li>favicon</li>
<li>high_res_favicon: high resolution favicon</li>
<li>high_res_favicon: iOS luncher icon</li>
<li>keywords: website keywords.</li>
</ul>
<h4 id="Color"><a href="#Color" class="headerlink" title="Color"></a>Color</h4><p>Setting up the theme color.</p>
<ul>
<li>primary_color: <a href="(#Primary-colors">Primary color</a></li>
<li>accent_color: <a href="#Accent-colors">Accent color</a></li>
<li>layout: <a href="#Layout">Layout</a></li>
<li><p>random: random color, available options are <code>global</code> (global site random color, namely every time you generate or deploy you blog, every pages’ color in the blog will change to another.) and <code>post</code>(only the post color will change)</p>
<blockquote>
<p>If you define a color in post’s <code>fort-matter</code>, the defined color takes precedence over the random color.<br>for some reasons, when the option is <code>post</code>, the custom pages’ color would change.</p>
</blockquote>
</li>
<li><p>bg_color: Global background color (needs to be set as HEX format)</p>
</li>
</ul>
<p><strong>For now, the Android Chrome status bar color changing does’t support the color with color scale.<br>For some reasons again (lol), please change the space to <code>-</code> when you use the color.<br>eg. <code>deep purple</code> -&gt; <code>deep-purple</code></strong></p>
<h5 id="Primary-colors"><a href="#Primary-colors" class="headerlink" title="Primary colors"></a>Primary colors</h5><p><img src="https://img.shields.io/badge/primary_color-red-%23F44336.svg?style=flat-square&amp;colorB=F44336" alt="red"> <img src="https://img.shields.io/badge/primary_color-pink-%23E91E63.svg?style=flat-square&amp;colorB=E91E63" alt="pink"> <img src="https://img.shields.io/badge/primary_color-purple-%239C27B0.svg?style=flat-square&amp;colorB=9C27B0" alt="purple"> <img src="https://img.shields.io/badge/primary_color-deep_purple-%23673AB7.svg?style=flat-square&amp;colorB=673AB7" alt="deep-purple"> <img src="https://img.shields.io/badge/primary_color-indigo-%233F51B5.svg?style=flat-square&amp;colorB=3F51B5" alt="indigo"> <img src="https://img.shields.io/badge/primary_color-blue-%232196F3.svg?style=flat-square&amp;colorB=2196F3" alt="blue"> <img src="https://img.shields.io/badge/primary_color-light_blue-%2303A9F4.svg?style=flat-square&amp;colorB=03A9F4" alt="light-blue"> <img src="https://img.shields.io/badge/primary_color-cyan-%2300BCD4.svg?style=flat-square&amp;colorB=00BCD4" alt="cyan"> <img src="https://img.shields.io/badge/primary_color-teal-%23009688.svg?style=flat-square&amp;colorB=009688" alt="teal"> <img src="https://img.shields.io/badge/primary_color-green-%234CAF50.svg?style=flat-square&amp;colorB=4CAF50" alt="green"> <img src="https://img.shields.io/badge/primary_color-light_green-%238BC34A.svg?style=flat-square&amp;colorB=8BC34A" alt="light-green"> <img src="https://img.shields.io/badge/primary_color-lime-%23CDDC39.svg?style=flat-square&amp;colorB=CDDC39" alt="lime"> <img src="https://img.shields.io/badge/primary_color-yellow-%23FFEB3B.svg?style=flat-square&amp;colorB=FFEB3B" alt="yellow"> <img src="https://img.shields.io/badge/primary_color-amber-%23FFC107.svg?style=flat-square&amp;colorB=FFC107" alt="amber"> <img src="https://img.shields.io/badge/primary_color-orange-%23FF9800.svg?style=flat-square&amp;colorB=FF9800" alt="orange"> <img src="https://img.shields.io/badge/primary_color-deep_orange-%23FF5722.svg?style=flat-square&amp;colorB=FF5722" alt="deep-orange"> <img src="https://img.shields.io/badge/primary_color-brown-%23795548.svg?style=flat-square&amp;colorB=795548" alt="brown"> <img src="https://img.shields.io/badge/primary_color-grey-%239E9E9E.svg?style=flat-square&amp;colorB=9E9E9E" alt="grey"></p>
<h5 id="Accent-colors"><a href="#Accent-colors" class="headerlink" title="Accent colors"></a>Accent colors</h5><p><img src="https://img.shields.io/badge/accent_color-red-%23FF5252.svg?style=flat-square&amp;colorB=FF5252" alt="red"> <img src="https://img.shields.io/badge/accent_color-pink-%23FF4081.svg?style=flat-square&amp;colorB=FF4081" alt="pink"> <img src="https://img.shields.io/badge/accent_color-purple-%23E040FB.svg?style=flat-square&amp;colorB=E040FB" alt="purple"> <img src="https://img.shields.io/badge/accent_color-deep_purple-%237C4DFF.svg?style=flat-square&amp;colorB=7C4DFF" alt="deep-purple"> <img src="https://img.shields.io/badge/accent_color-indigo-%23536DFE.svg?style=flat-square&amp;colorB=536DFE" alt="indigo"> <img src="https://img.shields.io/badge/accent_color-blue-%23448AFF.svg?style=flat-square&amp;colorB=448AFF" alt="blue"> <img src="https://img.shields.io/badge/accent_color-light_blue-%2340C4FF.svg?style=flat-square&amp;colorB=40C4FF" alt="light-blue"> <img src="https://img.shields.io/badge/accent_color-cyan-%2318FFFF.svg?style=flat-square&amp;colorB=18FFFF" alt="cyan"> <img src="https://img.shields.io/badge/accent_color-teal-%2364FFDA.svg?style=flat-square&amp;colorB=64FFDA" alt="teal"> <img src="https://img.shields.io/badge/accent_color-green-%2369F0AE.svg?style=flat-square&amp;colorB=69F0AE" alt="green"> <img src="https://img.shields.io/badge/accent_color-light_green-%23B2FF59.svg?style=flat-square&amp;colorB=B2FF59" alt="light-green"> <img src="https://img.shields.io/badge/accent_color-lime-%23EEFF41.svg?style=flat-square&amp;colorB=EEFF41" alt="lime"> <img src="https://img.shields.io/badge/accent_color-yellow-%23FFFF00.svg?style=flat-square&amp;colorB=FFFF00" alt="yellow"> <img src="https://img.shields.io/badge/accent_color-amber-%23FFD740.svg?style=flat-square&amp;colorB=FFD740" alt="amber"> <img src="https://img.shields.io/badge/accent_color-orange-%23FFAB40.svg?style=flat-square&amp;colorB=FFAB40" alt="orange"> <img src="https://img.shields.io/badge/accent_color-deep_orange-%23FF6E40.svg?style=flat-square&amp;colorB=FF6E40" alt="deep-orange"></p>
<h5 id="Layout"><a href="#Layout" class="headerlink" title="Layout"></a>Layout</h5><p>The theme has two <code>layouts</code>, the default layout is <code>white</code>, you change use the <code>dark</code> layout.</p>
<ul>
<li>layout: “dark”</li>
</ul>
<h4 id="appbar"><a href="#appbar" class="headerlink" title="appbar"></a>appbar</h4><ul>
<li>title: This is the default title in the appbar, it will always show, and will not change or hide, you can leave it blank<blockquote>
<p>Personally, I’m not recommend you leaving it blank, because it provides a go-to-index-page function.<br>you can find a <code>back</code> button in the appbar when you visit some page, this button just provides a return function, which is the as the browser provided.</p>
</blockquote>
</li>
</ul>
<p>Also, the header in the <code>drawer</code> uses this setting.</p>
<h4 id="post"><a href="#post" class="headerlink" title="post"></a>post</h4><ul>
<li>entry_excerpt: how many posts summary words will be displayed in the index page.</li>
<li>qr_code: posts/pages’ qr code, for more information, please click <a href="#QR_CODE">here</a></li>
<li>prism: code highlight<ul>
<li>theme: internal theme setting, including <code>default</code>, <code>coy</code>, <code>dark</code>, <code>funky</code>, <code>okaidia</code>, <code>solarizedlight</code>, <code>tomorrow</code>, <code>twilight</code></li>
<li>line_number: whether show line numbers before the code, available options are <code>true</code> and <code>false</code></li>
</ul>
</li>
<li>donate: post donate, please configure it with the examples. How to use icons please click <a href="#ICONS">here</a></li>
</ul>
<h4 id="share-menu"><a href="#share-menu" class="headerlink" title="share_menu"></a>share_menu</h4><p>Setting uo the share menu. If you don’t need any share options, please remove following contents and set <code>share_menu: false</code></p>
<ul>
<li>rss: article rss, the link is the same as the <code>path</code> in <code>hexo</code> <code>_config.yml</code> under <code>feed</code>, available options are <code>true</code> and <code>false</code>, more detailed click <a href="#RSS">here</a>.</li>
<li>weibo: Sina Weibo, available options are <code>true</code> and <code>false</code></li>
<li>twitter: Twitter, available options are <code>true</code> and <code>false</code></li>
<li>facebook: Facebook, available options are <code>true</code> and <code>false</code></li>
<li>googleplus: Google+, available options are <code>true</code> and <code>false</code></li>
<li>linkedin: Linkedin, available options are <code>true</code> and <code>false</code></li>
<li>qq: QQ, available options are <code>true</code> and <code>false</code></li>
<li>telegram: Telegram, available options are <code>true</code> and <code>false</code></li>
</ul>
<h4 id="comment"><a href="#comment" class="headerlink" title="comment"></a>comment</h4><p>comment service plugin, available options are <code>disqus</code> and <code>custom</code></p>
<ul>
<li>use: <code>disqus</code> or <code>custom</code></li>
<li>shortname: disqus short name, for example, <code>example.disqus.com</code>, so short name is <code>example</code>, if <code>use: custom</code>, this line is unavailable</li>
</ul>
<p>If you want to use the comment service that I haven’t add support, please click <a href="#customComment">here</a> for how to configure</p>
<h4 id="pagination"><a href="#pagination" class="headerlink" title="pagination"></a>pagination</h4><p>Pagination setting</p>
<ul>
<li>show: after how many pages the number will be hidden. eg. the original pagination is <code>1 2 3 4 5 6</code>, then <code>show: 2</code>, the pagination will change to <code>1 2 ... 5 6</code></li>
</ul>
<h4 id="footer"><a href="#footer" class="headerlink" title="footer"></a>footer</h4><ul>
<li><p>since: specify the date when the blog was setup</p>
<blockquote>
<p>I haven’t add a judgement here, it will lead to following problem.<br>If your blog was setup in in 2017, and the year now is 2017, so the copyright will display <code>2017 - 2017</code>, please avoid this.</p>
</blockquote>
</li>
<li><p>ICP: this is for users who are in China Mainland to show his/her ICP number.</p>
</li>
</ul>
<h4 id="pages"><a href="#pages" class="headerlink" title="pages"></a>pages</h4><p>How to use icons please click <a href="#ICONS">here</a></p>
<h5 id="uncategorized-pages"><a href="#uncategorized-pages" class="headerlink" title="uncategorized pages"></a>uncategorized pages</h5><p>Custom pages setting, please follow format which is left in the <code>_config.yml</code> or the one below.</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token punctuation">-</span> <span class="token key atrule">Test1</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">link</span><span class="token punctuation">:</span> <span class="token string">"/test1"</span>
  <span class="token punctuation">-</span> <span class="token key atrule">icon</span><span class="token punctuation">:</span> "`&amp;<span class="token comment" spellcheck="true">#xe84d;`"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>These lines will generate an entrance of a link called <code>Test1</code>, links to <code>yoursite.com/test1</code>, and the icon is <code>&amp;#xe84d;</code>.</p>
<h5 id="categorized-pages"><a href="#categorized-pages" class="headerlink" title="categorized pages"></a>categorized pages</h5><p>Custom pages support the pages which belong to the same category to be shown under a section, if you wants to enable it, please configure it with the format that the left in the file.<br><strong>Key option is <code>cascade: true</code></strong></p>
<h4 id="sns"><a href="#sns" class="headerlink" title="sns"></a>sns</h4><p>Here you can set up your contact information, please follow the format that left in the file. How to use icons please click <a href="#ICONS">here</a></p>
<blockquote>
<p>or you can fill <code>false</code> to disable.</p>
</blockquote>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">Twitter</span><span class="token punctuation">:</span>
    <span class="token key atrule">link</span><span class="token punctuation">:</span> https<span class="token punctuation">:</span>//twitter.com
    <span class="token key atrule">fa</span><span class="token punctuation">:</span> <span class="token string">'fa-twitter'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<h3 id="Vendor"><a href="#Vendor" class="headerlink" title="Vendor"></a>Vendor</h3><p>The css and js files haven’t cdn service support, so they are accessed from your server directly. If you have your own cdn service, you can do following configurations.</p>
<ul>
<li>style_min_css: direct address</li>
<li>js_min_js: direct address</li>
<li>outdatedbrowser_min_js: direct address</li>
</ul>
<blockquote>
<p>Through this feature you can modify the css and js.</p>
</blockquote>
<h3 id="Plugins"><a href="#Plugins" class="headerlink" title="Plugins"></a>Plugins</h3><h4 id="busuanzi"><a href="#busuanzi" class="headerlink" title="busuanzi"></a>busuanzi</h4><p>busuanzi is a plugin to count how many page views and unique visitors.<br>If you don’t need it, please delete following lines and set <code>busuanzi: false</code></p>
<ul>
<li>all_site_uv: All site unique visitors</li>
<li>post_pv: how many times the page has been viewed</li>
<li>busuanzi_pure_mini_js: busuanzi js address, it is hosted in China Mainland.</li>
</ul>
<h4 id="search"><a href="#search" class="headerlink" title="search"></a>search</h4><p>For now, this cant be disabled. Please install <code>hexo-generator-search</code> to prevent errors.</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> hexo-generator-search --save
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>more details can be found <a href="https://github.com/PaicHyperionDev/hexo-generator-search" target="_blank" rel="noopener">here</a></p>
<h4 id="Mathjax"><a href="#Mathjax" class="headerlink" title="Mathjax"></a>Mathjax</h4><p>If your post or page needs <code>Mathjax</code>, please add <code>mathjax: true</code> in the <code>font-matter</code>.</p>
<h3 id="Advanced-settings"><a href="#Advanced-settings" class="headerlink" title="Advanced settings"></a>Advanced settings</h3><h4 id="Custom-css-and-js"><a href="#Custom-css-and-js" class="headerlink" title="Custom css and js"></a>Custom css and js</h4><p>If you want to add some custom code like <code>font-face</code>, <code>Google Analytics</code>, etc., please create a <code>custom</code> folder in the <code>layout</code> folder in theme folder, then create a <code>custom_head.ejs</code> file (the code inside  goes before <code>&lt;/head&gt;</code> ) or a <code>custom_js.ejs</code> file (the code inside  goes before <code>&lt;/body&gt;</code> ) to put your own code.</p>
<h4 id="ICONS"><a href="#ICONS" class="headerlink" title="ICONS"></a>ICONS</h4><p>The theme supports <code>font awesome icons</code> and <code>Material icons</code>.<br>Add <code>fa:</code> to the option that you want to use <code>font awesome icons</code>.</p>
<blockquote>
<p>You can find icons <a href="http://fontawesome.io/icons/" target="_blank" rel="noopener">here</a></p>
</blockquote>
<p>Add <code>md:</code> to the option that you want to use <code>Material icons</code>.</p>
<blockquote>
<p>For icons that support modern browsers, you can find from <a href="https://material.io/icons" target="_blank" rel="noopener">here</a>. When you find the one you need, click it, and copy the characters <strong>after <code>https://material.io/icons/#ic_</code></strong><br>For icons that support all mainstream browsers, you can find from <a href="http://www.mdui.org/docs/material_icon" target="_blank" rel="noopener">here</a>, but the site hasn’t an English version. You can just browse the icon list or search an icon, click the one you need, copy the characters like <code>&amp;#xe84d;</code>.</p>
</blockquote>
<p>Add <code>null_icon: true</code> as a placeholer.</p>
<h4 id="lightgallery"><a href="#lightgallery" class="headerlink" title="lightgallery"></a>lightgallery</h4><p><strong>unspported now</strong><br>Lightgallery is a gallery plugin, you can see what it can do just click the following picture.</p>
<h4 id="RSS"><a href="#RSS" class="headerlink" title="RSS"></a>RSS</h4><p>If you need rss, please install <code>hexo-generator-feed</code></p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> hexo-generator-feed --save
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>more details can be found <a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="noopener">here</a>.</p>
<h4 id="service-worker"><a href="#service-worker" class="headerlink" title="service_worker"></a>service_worker</h4><p>The theme has internal Service Worker support, if you need this feature, please open <code>source/sw.js</code> in the <strong>THEME FOLDER</strong>, and configure <code>ignoreFetch</code> to match your site setting, for more information, please google or yahoo; then, create a <code>offline.md</code> under <code>source</code> in the <strong>HEXO FLODER</strong>, <strong>the format is the same as the hexo markdown</strong></p>
<p>available options are <code>true</code> and <code>pwa</code></p>
<ul>
<li>true: only inject <code>Service Worker</code></li>
<li>pwa: The site supports Google’s <code>Progressive Web Apps</code></li>
</ul>
<p>If you use <code>pwa</code>, please open <code>source/manifest.json</code> in the <strong>THEME FOLDER</strong> to configure, for how to configure please google or yahoo.</p>
<h4 id="archive-page"><a href="#archive-page" class="headerlink" title="archive page"></a>archive page</h4><h5 id="about-me"><a href="#about-me" class="headerlink" title="about_me"></a>about_me</h5><p>This is the <code>about</code> dialog in the <code>archive page</code>. If you need it, please create <code>about.yml</code> under <code>source/_data</code> in the <strong>HEXO FOLDER</strong>, and choose a following format to fill in. You can directly copy and paste to see the style.</p>
<p>Options:</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">slogan</span><span class="token punctuation">:</span> show the slogan/description or not<span class="token punctuation">,</span> available options is `true`<span class="token punctuation">,</span> or just leave it blank.
<span class="token key atrule">others</span><span class="token punctuation">:</span> the text under slogan/description. (these two options are independent)
  <span class="token punctuation">-</span> <span class="token string">'1'</span>
  <span class="token punctuation">-</span> <span class="token string">'2'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>Format 1:</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">hellow</span><span class="token punctuation">:</span>
  <span class="token key atrule">main</span><span class="token punctuation">:</span>
    <span class="token key atrule">hi</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xxxxxx
      <span class="token key atrule">s_img</span><span class="token punctuation">:</span> /img/avatar.png
    <span class="token key atrule">hi1</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xx
      <span class="token key atrule">link</span><span class="token punctuation">:</span> //google.com
      <span class="token key atrule">s_img</span><span class="token punctuation">:</span> /img/favicon.png
    <span class="token key atrule">hi2</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> aaaa
  <span class="token key atrule">more</span><span class="token punctuation">:</span>
    <span class="token key atrule">hi3</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">'561456415341'</span>
      <span class="token key atrule">link</span><span class="token punctuation">:</span> //google.com
      <span class="token key atrule">s_img</span><span class="token punctuation">:</span> /img/favicon.png
    <span class="token key atrule">hi4</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">'xxxxxxx'</span>
      <span class="token key atrule">s_img</span><span class="token punctuation">:</span> /img/favicon.png
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Format 2:</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">hellow1</span><span class="token punctuation">:</span>
  <span class="token key atrule">main</span><span class="token punctuation">:</span>
    <span class="token key atrule">hi</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xxxxxx
      <span class="token key atrule">one_line</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">hi1</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xx
      <span class="token key atrule">fa</span><span class="token punctuation">:</span> <span class="token string">'fa-beer'</span>
    <span class="token key atrule">工作經歷</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xxxx
      <span class="token key atrule">content_1</span><span class="token punctuation">:</span> Designer &amp; Developer，2222
  <span class="token key atrule">more</span><span class="token punctuation">:</span>
    <span class="token key atrule">hi3</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">'1111'</span>
      <span class="token key atrule">one_line</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">s_img</span><span class="token punctuation">:</span> /img/favicon.png
    <span class="token key atrule">hi4</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">'1111'</span>
      <span class="token key atrule">one_line</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">c_img</span><span class="token punctuation">:</span> /img/favicon.png
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Format 3:</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">hellow2</span><span class="token punctuation">:</span>
  <span class="token key atrule">main</span><span class="token punctuation">:</span>
    <span class="token key atrule">hi</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xxxxxx
      <span class="token key atrule">one_line</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">md</span><span class="token punctuation">:</span> <span class="token string">'home'</span>
    <span class="token key atrule">hi1</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xx
      <span class="token key atrule">link</span><span class="token punctuation">:</span> <span class="token string">'xxxx/xxx'</span>
      <span class="token key atrule">fa</span><span class="token punctuation">:</span> <span class="token string">'fa-beer'</span>
    <span class="token key atrule">工作經歷</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> xxxx
      <span class="token key atrule">content_1</span><span class="token punctuation">:</span> Designer &amp; Developer，2222
  <span class="token key atrule">more</span><span class="token punctuation">:</span>
    <span class="token key atrule">hi3</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">'1111'</span>
      <span class="token key atrule">one_line</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">null_icon</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">hi4</span><span class="token punctuation">:</span>
      <span class="token key atrule">content</span><span class="token punctuation">:</span> <span class="token string">'1111'</span>
      <span class="token key atrule">one_line</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
      <span class="token key atrule">fa</span><span class="token punctuation">:</span> <span class="token string">'fa-qq'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>Some options meaning:</p>
<ul>
<li>one_line: single line content, if this is <code>true</code>, the text in <code>content:</code> will not be rendered.</li>
<li>fa/md/null_icon: How to use icons please click <a href="#ICONS">here</a></li>
<li>content_1: text that below the text from <code>content:</code></li>
<li>link: web address</li>
<li>s_img: square picture that shows before the section content.</li>
<li>c_img: circular picture that shows before the section content.</li>
</ul>
<h5 id="random-pics"><a href="#random-pics" class="headerlink" title="random_pics"></a>random_pics</h5><p>The random pictures on the <code>Categories</code>, <code>Tags</code>, <code>Years</code> in the <code>archive page</code>(defining a certain picture is not supported). Those pictures are stored in <code>source/img/random</code> in the <strong>THEME FOLDER</strong>.<br>If you add picture(s), change the total pictures number.<br><strong>Only `jpg is supported</strong></p>
<h3 id="Post"><a href="#Post" class="headerlink" title="Post"></a>Post</h3><h4 id="QR-CODE"><a href="#QR-CODE" class="headerlink" title="QR_CODE"></a>QR_CODE</h4><p>QR Code for posts and custom pages, available options are <code>true</code> and <code>false</code>, you need to install <code>hexo-helper-qrcode</code> plugin to enbale the feature. Please run following command in terminal in hexo folder.</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> hexo-helper-qrcode --save
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="Thumbnail"><a href="#Thumbnail" class="headerlink" title="Thumbnail"></a>Thumbnail</h4><p>Post and custom page support thumbnail.</p>
<ul>
<li>thumbnail: By using this method, the post thumbnail will be showed between <code>post title</code> and <code>post content</code>.</li>
</ul>
<h4 id="Custom-primary-amp-accent-color-in-post-and-custom-page"><a href="#Custom-primary-amp-accent-color-in-post-and-custom-page" class="headerlink" title="Custom primary &amp;/ accent color in post and custom page"></a>Custom primary &amp;/ accent color in post and custom page</h4><p>When you write post, add <code>primary_color</code> and/or <code>accent_color</code> in the <code>font-matter</code> can change this post’s theme color. Colors name is the same as <a href="#Color">Color</a><br>eg.</p>
<pre class="line-numbers language-markdown" mdui-tooltip="{content: 'markdown'}"><code class="language-markdown">title: This is title
primary_color: grey
<span class="token title important">accent_color: red
<span class="token punctuation">-----------</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="No-comment-No-category-No-tag"><a href="#No-comment-No-category-No-tag" class="headerlink" title="No comment, No category, No tag"></a>No comment, No category, No tag</h4><p>add following content to <code>font-matter</code> to disable comment, disable category, disable tag</p>
<ul>
<li>comment: set it <code>false</code> to disable comment</li>
<li>category: set it <code>false</code> to disable category</li>
<li>tag: set it <code>false</code> to disable tag</li>
</ul>
<h4 id="Pinned-Post"><a href="#Pinned-Post" class="headerlink" title="Pinned Post"></a>Pinned Post</h4><p>Just add <code>pinned: true</code> to <code>font-matter</code> to pin the post to top</p>
<h4 id="customComment"><a href="#customComment" class="headerlink" title="customComment"></a>customComment</h4><p>please open <code>layout/custom/custom_comment.ejs</code> in the theme folder, and paste the comment service code to this file.<br>If the comment service needs you to set the <code>source id (or something like that)</code> of the page, please fill it with <code>&lt;%- config.url + config.root + page.path %&gt;</code></p>
<h3 id="Custom-pages"><a href="#Custom-pages" class="headerlink" title="Custom pages"></a>Custom pages</h3><h4 id="Friends-page"><a href="#Friends-page" class="headerlink" title="Friends page"></a>Friends page</h4><p>Enter the <code>source</code> folder in <code>hexo</code> folder, create a folder with the name you like, then enter it and create a <code>index.md</code> file, fill it with following content</p>
<pre class="line-numbers language-markdown" mdui-tooltip="{content: 'markdown'}"><code class="language-markdown"><span class="token hr punctuation">---</span>
title: MY FRIENDS
layout: friends
<span class="token title important">header: header of friends page, can be left blank
<span class="token punctuation">---</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>then go back to the <code>source</code> folder, enter the <code>_data</code> folder (if there isn’t any, please create one), and create a file called <code>friends.yml</code> (<strong>the name can’t be changed</strong>), using following format to creat links.</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">Example</span><span class="token punctuation">:</span>
    <span class="token key atrule">link</span><span class="token punctuation">:</span> Site address
    <span class="token key atrule">avatar</span><span class="token punctuation">:</span> Avatar
    <span class="token key atrule">descr</span><span class="token punctuation">:</span> Slogan or descrpition
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h4 id="Gallery"><a href="#Gallery" class="headerlink" title="Gallery"></a>Gallery</h4><p>Gallery supports multi album and single album.</p>
<h5 id="multi-album"><a href="#multi-album" class="headerlink" title="multi album"></a>multi album</h5><p>Create a <code>galleries.yml</code> in <code>source/_data</code> in the <strong>HEXO FOLDER</strong>, and configure it with following format.<br>And add a custom page anywhere in <code>source</code> in the <strong>HEXO FOLDER</strong>, and fill <code>layout: galleries</code></p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml">Albun name<span class="token punctuation">:</span>
  <span class="token key atrule">link</span><span class="token punctuation">:</span> URL
  <span class="token key atrule">descr</span><span class="token punctuation">:</span> album description or something else
  <span class="token key atrule">bg</span><span class="token punctuation">:</span> default image
  <span class="token key atrule">logo</span><span class="token punctuation">:</span> this can be ignored<span class="token punctuation">,</span> a circular image<span class="token punctuation">,</span> configure to see what the style like.
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h5 id="single-album"><a href="#single-album" class="headerlink" title="single album"></a>single album</h5><p>Please create a custom page anywhere in <code>source</code> in the <strong>HEXO FOLDER</strong>, and fill <code>layout: gallery</code>, <strong>then add <code>photos:</code> with following format in the <code>font-matter</code></strong></p>
<pre class="line-numbers language-markdown" mdui-tooltip="{content: 'markdown'}"><code class="language-markdown">photos:
  x:
<span class="token code keyword">    img: /img/bg.png</span>
<span class="token code keyword">    descr: 'description goes here'</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>Configure to see what the style like.</p>
<h3 id="Known-issues"><a href="#Known-issues" class="headerlink" title="Known issues"></a>Known issues</h3><h4 id="Using-hexo-neat-plugin"><a href="#Using-hexo-neat-plugin" class="headerlink" title="Using hexo-neat plugin"></a>Using hexo-neat plugin</h4><p>Because <code>hexo-neat</code> plugin will add note when it neats the files, this will break the Android Chrome status bar color changing, if you want to/ are using this plugin, please do following modifications.</p>
<p>Enter the <code>node_modules</code> folder in the <code>hexo</code> folder, find and enter <code>hexo-neat</code> folder, then enter <code>lib</code> folder, use your editor open <code>filter.js</code>, find following code and <strong>delete</strong></p>
<p><strong>The number of rows for reference only, please seach the code</strong></p>
<p>Line 31, 32</p>
<pre class="line-numbers language-javascript" mdui-tooltip="{content: 'javascript'}"><code class="language-javascript"><span class="token keyword">var</span> prefix <span class="token operator">=</span> <span class="token string">'&lt;!-- build time:'</span> <span class="token operator">+</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" -->"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> end <span class="token operator">=</span> <span class="token string">'&lt;!-- rebuild by neat -->'</span><span class="token punctuation">;</span>
result <span class="token operator">=</span> prefix <span class="token operator">+</span> result <span class="token operator">+</span> end<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Line 58, 59</p>
<pre class="line-numbers language-javascript" mdui-tooltip="{content: 'javascript'}"><code class="language-javascript"><span class="token keyword">var</span> prefix <span class="token operator">=</span> <span class="token string">'/* build time:'</span> <span class="token operator">+</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"*/\n"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> end <span class="token operator">=</span> <span class="token string">'\n/* rebuild by neat */'</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>Line 87, 88</p>
<pre class="line-numbers language-javascript" mdui-tooltip="{content: 'javascript'}"><code class="language-javascript"><span class="token keyword">var</span> prefix <span class="token operator">=</span> <span class="token string">'// build time:'</span> <span class="token operator">+</span> <span class="token function">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"\n"</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> end <span class="token operator">=</span> <span class="token string">'\n//rebuild by neat '</span><span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>Find the following codes and <strong>modify</strong><br><strong>The number of rows for reference only, please seach the code</strong></p>
<p>Line 60</p>
<pre class="line-numbers language-javascript" mdui-tooltip="{content: 'javascript'}"><code class="language-javascript"><span class="token keyword">var</span> css_result <span class="token operator">=</span> prefix <span class="token operator">+</span> result<span class="token punctuation">.</span>styles <span class="token operator">+</span> end<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>change to</p>
<pre class="line-numbers language-javascript" mdui-tooltip="{content: 'javascript'}"><code class="language-javascript"><span class="token keyword">var</span> css_result <span class="token operator">=</span> result<span class="token punctuation">.</span>styles<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Line 89</p>
<pre class="line-numbers language-javascript" mdui-tooltip="{content: 'javascript'}"><code class="language-javascript"><span class="token keyword">var</span> js_result <span class="token operator">=</span> prefix <span class="token operator">+</span> result<span class="token punctuation">.</span>code <span class="token operator">+</span> end<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>change to</p>
<pre class="line-numbers language-javascript" mdui-tooltip="{content: 'javascript'}"><code class="language-javascript"><span class="token keyword">var</span> js_result <span class="token operator">=</span> result<span class="token punctuation">.</span>code<span class="token punctuation">;</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;This is hexo-theme-mdui document English version&lt;br&gt;
    
    </summary>
    
      <category term="Document" scheme="https://blog.halyul.com/categories/Document/"/>
    
      <category term="xxx" scheme="https://blog.halyul.com/categories/Document/xxx/"/>
    
      <category term="xx" scheme="https://blog.halyul.com/categories/Document/xxx/xx/"/>
    
    
      <category term="Hexo" scheme="https://blog.halyul.com/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>解决Hexo MODULE NOT FOUND问题</title>
    <link href="https://blog.halyul.com/posts/hexo-module-not-found%20(copy)/"/>
    <id>https://blog.halyul.com/posts/hexo-module-not-found (copy)/</id>
    <published>2017-03-22T13:14:00.000Z</published>
    <updated>2017-11-25T09:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>Hexo上最玄学的问题，没有之一<br><a id="more"></a></p>
<h2 id="原油缘由"><a href="#原油缘由" class="headerlink" title="原油缘由"></a><del>原油</del>缘由</h2><p>之前给电脑上了Hackintosh， 然后就要开始准备Hexo来写博客和主题，然而，我却遇到了这个玄学问题。</p>
<p>在执行一切<code>hexo</code>命令时，均出现</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash"><span class="token punctuation">{</span> <span class="token punctuation">[</span>Error: Cannot <span class="token function">find</span> module <span class="token string">'./build/Release/DTraceProviderBindings'</span><span class="token punctuation">]</span> code: <span class="token string">'MODULE_NOT_FOUND'</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token punctuation">[</span>Error: Cannot <span class="token function">find</span> module <span class="token string">'./build/default/DTraceProviderBindings'</span><span class="token punctuation">]</span> code: <span class="token string">'MODULE_NOT_FOUND'</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token punctuation">[</span>Error: Cannot <span class="token function">find</span> module <span class="token string">'./build/Debug/DTraceProviderBindings'</span><span class="token punctuation">]</span> code: <span class="token string">'MODULE_NOT_FOUND'</span> <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Google了一下，发现hexo的issues里面有<a href="https://github.com/hexojs/hexo/issues/1055" target="_blank" rel="noopener">这个</a>.他们都用</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> hexo --no-optional
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>解决了，不幸的是，我这里解决不了这个问题。。。。</p>
<p>各种搜寻后，终于发现了解决方法。</p>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>我发现在<code>node_modules</code>中，<code>dtrace-provider</code>这个模块是存在的，然而hexo是报错，想必某些玄学原因没有读取到这货，我就<del>大胆的</del>机智的运行了</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">npm</span> uninstall dtrace-provider
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后再运行</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> dtrace-provider
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong><big>终于没有这该死的错误了！</big></strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Hexo上最玄学的问题，没有之一&lt;br&gt;
    
    </summary>
    
      <category term="杂" scheme="https://blog.halyul.com/categories/%E6%9D%82/"/>
    
    
      <category term="Hexo" scheme="https://blog.halyul.com/tags/Hexo/"/>
    
      <category term="xxx" scheme="https://blog.halyul.com/tags/xxx/"/>
    
      <category term="xx" scheme="https://blog.halyul.com/tags/xx/"/>
    
  </entry>
  
  <entry>
    <title>解决Hexo MODULE NOT FOUND问题</title>
    <link href="https://blog.halyul.com/posts/hexo-module-not-found/"/>
    <id>https://blog.halyul.com/posts/hexo-module-not-found/</id>
    <published>2017-03-22T13:14:00.000Z</published>
    <updated>2017-11-25T09:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>Hexo上最玄学的问题，没有之一<br><a id="more"></a></p>
<h2 id="原油缘由"><a href="#原油缘由" class="headerlink" title="原油缘由"></a><del>原油</del>缘由</h2><p>之前给电脑上了Hackintosh， 然后就要开始准备Hexo来写博客和主题，然而，我却遇到了这个玄学问题。</p>
<p>在执行一切<code>hexo</code>命令时，均出现</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash"><span class="token punctuation">{</span> <span class="token punctuation">[</span>Error: Cannot <span class="token function">find</span> module <span class="token string">'./build/Release/DTraceProviderBindings'</span><span class="token punctuation">]</span> code: <span class="token string">'MODULE_NOT_FOUND'</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token punctuation">[</span>Error: Cannot <span class="token function">find</span> module <span class="token string">'./build/default/DTraceProviderBindings'</span><span class="token punctuation">]</span> code: <span class="token string">'MODULE_NOT_FOUND'</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token punctuation">[</span>Error: Cannot <span class="token function">find</span> module <span class="token string">'./build/Debug/DTraceProviderBindings'</span><span class="token punctuation">]</span> code: <span class="token string">'MODULE_NOT_FOUND'</span> <span class="token punctuation">}</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>Google了一下，发现hexo的issues里面有<a href="https://github.com/hexojs/hexo/issues/1055" target="_blank" rel="noopener">这个</a>.他们都用</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">npm</span> <span class="token function">install</span> hexo --no-optional
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>解决了，不幸的是，我这里解决不了这个问题。。。。</p>
<p>各种搜寻后，终于发现了解决方法。</p>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>我发现在<code>node_modules</code>中，<code>dtrace-provider</code>这个模块是存在的，然而hexo是报错，想必某些玄学原因没有读取到这货，我就<del>大胆的</del>机智的运行了</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">npm</span> uninstall dtrace-provider
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>然后再运行</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> dtrace-provider
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong><big>终于没有这该死的错误了！</big></strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Hexo上最玄学的问题，没有之一&lt;br&gt;
    
    </summary>
    
      <category term="杂" scheme="https://blog.halyul.com/categories/%E6%9D%82/"/>
    
    
      <category term="Hexo" scheme="https://blog.halyul.com/tags/Hexo/"/>
    
      <category term="xxx" scheme="https://blog.halyul.com/tags/xxx/"/>
    
      <category term="xx" scheme="https://blog.halyul.com/tags/xx/"/>
    
  </entry>
  
  <entry>
    <title>失踪人口回归系列之增强站点SSL安全性</title>
    <link href="https://blog.halyul.com/posts/imporve-ssl%20(copy)/"/>
    <id>https://blog.halyul.com/posts/imporve-ssl (copy)/</id>
    <published>2017-03-22T11:39:00.000Z</published>
    <updated>2017-11-25T09:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>失踪人口回归系列之第二篇<br><a id="more"></a></p>
<p>经过这篇文章后，我的SSL Lab的测试也是A+了。</p>
<ul>
<li>原文地址：<a href="https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html" target="_blank" rel="noopener">https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html</a></li>
<li>原文作者：<a href="https://raymii.org/" target="_blank" rel="noopener">Remy van Elst</a></li>
<li>译者与校对：<a href="https://github.com/wxy" target="_blank" rel="noopener">wxy</a></li>
<li>本文由<a href="https://github.com/LCTT/TranslateProject" target="_blank" rel="noopener">LCTT</a>原创翻译，<a href="http://linux.cn/" target="_blank" rel="noopener">Linux中国</a> 荣誉推出</li>
<li>此为原文重排版</li>
</ul>
<p>本文向你介绍如何在 nginx 服务器上设置健壮的 SSL 安全机制。我们通过禁用 SSL 压缩来降低 CRIME 攻击威胁；禁用协议上存在安全缺陷的 SSLv3 及更低版本，并设置更健壮的加密套件（cipher suite）来尽可能启用前向安全性（Forward Secrecy）；此外，我们还启用了 HSTS 和 HPKP。这样我们就拥有了一个健壮而可经受考验的 SSL 配置，并可以在 Qually Labs 的 SSL 测试中得到 A 级评分。</p>
<p>本教程可以通过<a href="http://blog.ivanristic.com/2014/01/ssl-labs-stricter-security-requirements-for-2014.html" target="_blank" rel="noopener">发布于 2014/1/21 的 SSL 实验室测试的严格要求</a>（我之前就通过了测试，如果你按照本文操作就可以得到一个 A+ 评分）。</p>
<ul>
<li>本教程也可用于 Apache</li>
<li>本教程也可用于 Lighttpd</li>
<li><p>本教程也可用于 FreeBSD, NetBSD 和 OpenBSD 上的 nginx ，放在<a href="http://www.bsdnow.tv/tutorials/nginx" target="_blank" rel="noopener">BSD Now 播客上</a><br>你可以从下列链接中找到这方面的进一步内容：</p>
</li>
<li><p><a href="https://en.wikipedia.org/wiki/Transport_Layer_Security#BEAST_attack" target="_blank" rel="noopener">野兽攻击（BEAST）</a></p>
</li>
<li><a href="https://en.wikipedia.org/wiki/CRIME_%28security_exploit%29" target="_blank" rel="noopener">罪恶攻击（CRIME）</a></li>
<li><a href="http://blog.cryptographyengineering.com/2015/03/attack-of-week-freak-or-factoring-nsa.html" target="_blank" rel="noopener">怪物攻击（FREAK ）</a></li>
<li><a href="http://heartbleed.com/" target="_blank" rel="noopener">心血漏洞（Heartbleed）</a></li>
<li><a href="https://en.wikipedia.org/wiki/Perfect_forward_secrecy" target="_blank" rel="noopener">完备的前向安全性（Perfect Forward Secrecy）</a></li>
<li><a href="https://en.wikipedia.org/wiki/Transport_Layer_Security#Dealing_with_RC4_and_BEAST" target="_blank" rel="noopener">RC4 和 BEAST 的处理</a></li>
</ul>
<p><strong><big>在编辑之前切记备份一下配置文件！</big></strong></p>
<h3 id="我是懒人"><a href="#我是懒人" class="headerlink" title="我是懒人"></a>我是懒人</h3><p>那你直接看我从<a href="https://cipherli.st/" target="_blank" rel="noopener">Cipherli.st</a>上得到的内容复制粘贴到你的站点配置就好了。</p>
<h4 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h4><pre><code>SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
SSLProtocol All -SSLv2 -SSLv3
SSLHonorCipherOrder On
# HSTS
Header always set Strict-Transport-Security &quot;max-age=63072000; includeSubDomains; preload&quot;
Header always set X-Frame-Options DENY
Header always set X-Content-Type-Options nosniff
# Apache版本 &gt;= 2.4
SSLCompression off
SSLUseStapling on
SSLStaplingCache &quot;shmcb:logs/stapling-cache(150000)&quot;
# Apache版本 &gt;= 2.4.11
SSLSessionTickets Off
</code></pre><h4 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h4><pre><code>ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
ssl_prefer_server_ciphers on;
ssl_ciphers &quot;EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH&quot;;
ssl_ecdh_curve secp384r1; # nginx版本 &gt;= 1.1.0
ssl_session_cache shared:SSL:10m;
ssl_session_tickets off; # nginx版本 &gt;= 1.5.9
ssl_stapling on; # Requires nginx &gt;= 1.3.7
ssl_stapling_verify on; # nginx版本 =&gt; 1.3.7
resolver $DNS-IP-1 $DNS-IP-2 valid=300s; # 此处将$DNS-IP-1和$DNS-IP-2更换为DNS服务商的IP
resolver_timeout 5s;
add_header Strict-Transport-Security &quot;max-age=63072000; #HSTS includeSubDomains; preload&quot;;
add_header X-Frame-Options DENY;
add_header X-Content-Type-Options nosniff;
</code></pre><h4 id="Lighttpd"><a href="#Lighttpd" class="headerlink" title="Lighttpd"></a>Lighttpd</h4><pre><code>ssl.honor-cipher-order = &quot;enable&quot;
ssl.cipher-list = &quot;EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH&quot;
ssl.use-compression = &quot;disable&quot;
setenv.add-response-header = (
    &quot;Strict-Transport-Security&quot; =&gt; &quot;max-age=63072000; includeSubDomains; preload&quot;,
    &quot;X-Frame-Options&quot; =&gt; &quot;DENY&quot;,
    &quot;X-Content-Type-Options&quot; =&gt; &quot;nosniff&quot;
)
ssl.use-sslv2 = &quot;disable&quot;
ssl.use-sslv3 = &quot;disable&quot;
</code></pre><h3 id="我不是懒人"><a href="#我不是懒人" class="headerlink" title="我不是懒人"></a>我不是懒人</h3><h4 id="方便快捷修改站点配置文件"><a href="#方便快捷修改站点配置文件" class="headerlink" title="方便快捷修改站点配置文件"></a>方便快捷修改站点配置文件</h4><h5 id="SSLv2-和-SSLv3"><a href="#SSLv2-和-SSLv3" class="headerlink" title="SSLv2 和 SSLv3"></a>SSLv2 和 SSLv3</h5><p>SSLv2 是不安全的，所以我们需要禁用它。我们也禁用 SSLv3，因为 TLS 1.0 在遭受到降级攻击时，会允许攻击者强制连接使用 SSLv3，从而禁用了前向安全性（forward secrecy）。</p>
<p>编辑站点配置文件：</p>
<pre><code>ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
</code></pre><h5 id="加密套件（cipher-suite）"><a href="#加密套件（cipher-suite）" class="headerlink" title="加密套件（cipher suite）"></a>加密套件（cipher suite）</h5><p>前向安全性（Forward Secrecy）用于在长期密钥被破解时确保会话密钥的完整性。PFS（完备的前向安全性）是指强制在每个/每次会话中推导新的密钥。</p>
<p>这就是说，泄露的私钥并不能用来解密（之前）记录下来的 SSL 通讯。</p>
<p>提供PFS（完备的前向安全性）功能的是那些使用了一种 Diffie-Hellman 密钥交换的短暂形式的加密套件。它们的缺点是系统开销较大，不过可以使用椭圆曲线的变体来改进。</p>
<p>以下两个加密套件是我推荐的，之后<a href="https://wiki.mozilla.org/Security/Server_Side_TLS" target="_blank" rel="noopener">Mozilla 基金会</a>也推荐了。</p>
<p>推荐的加密套件：</p>
<pre><code>ssl_ciphers &#39;AES128+EECDH:AES128+EDH&#39;;
</code></pre><p>向后兼容的推荐的加密套件（IE6/WinXP）：</p>
<pre><code>ssl_ciphers &quot;ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES256-GCM-SHA384:AES128-GCM-SHA256:AES256-SHA256:AES128-SHA256:AES256-SHA:AES128-SHA:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!MD5:!PSK:!RC4&quot;;
</code></pre><p>如果你的 OpenSSL 版本比较旧，不可用的加密算法会自动丢弃。应该一直使用上述的完整套件，让 OpenSSL 选择一个它所支持的。</p>
<p>加密套件的顺序是非常重要的，因为其决定了优先选择哪个算法。上述优先推荐的算法中提供了PFS（完备的前向安全性）。</p>
<p>较旧版本的 OpenSSL 也许不能支持这个算法的完整列表，AES-GCM 和一些 ECDHE 算法是相当新的，在 Ubuntu 和 RHEL 中所带的绝大多数 OpenSSL 版本中不支持。</p>
<h5 id="更多设置"><a href="#更多设置" class="headerlink" title="更多设置"></a>更多设置</h5><p>确保你也添加了如下行：</p>
<pre><code>ssl_prefer_server_ciphers on;
ssl_session_cache shared:SSL:10m;
</code></pre><p>在一个 SSLv3 或 TLSv1 握手过程中选择一个加密算法时，一般使用客户端的首选算法。如果设置了上述配置，则会替代地使用服务器端的首选算法。</p>
<ul>
<li><a href="http://wiki.nginx.org/HttpSslModule#ssl_prefer_server_ciphers" target="_blank" rel="noopener">关于 ssl_prefer_server_ciphers 的更多信息</a></li>
<li><a href="http://wiki.nginx.org/HttpSslModule#ssl_ciphers" target="_blank" rel="noopener">关于 ssl_ciphers 的更多信息</a></li>
</ul>
<h5 id="前向安全性和-Diffie-Hellman-Ephemeral-（DHE）参数"><a href="#前向安全性和-Diffie-Hellman-Ephemeral-（DHE）参数" class="headerlink" title="前向安全性和 Diffie Hellman Ephemeral （DHE）参数"></a>前向安全性和 Diffie Hellman Ephemeral （DHE）参数</h5><p>前向安全性（Forward Secrecy）的概念很简单：客户端和服务器协商一个永不重用的密钥，并在会话结束时销毁它。服务器上的 RSA 私钥用于客户端和服务器之间的 Diffie-Hellman 密钥交换签名。从 Diffie-Hellman 握手中获取的预主密钥会用于之后的编码。因为预主密钥是特定于客户端和服务器之间建立的某个连接，并且只用在一个限定的时间内，所以称作短暂模式（Ephemeral）。</p>
<p>使用了前向安全性，如果一个攻击者取得了一个服务器的私钥，他是不能解码之前的通讯信息的。这个私钥仅用于 Diffie Hellman 握手签名，并不会泄露预主密钥。Diffie Hellman 算法会确保预主密钥绝不会离开客户端和服务器，而且不能被中间人攻击所拦截。</p>
<p>所有版本的 nginx（如1.4.4）都依赖于 OpenSSL 给 Diffie-Hellman （DH）的输入参数。不幸的是，这意味着 Diffie-Hellman Ephemeral（DHE）将使用 OpenSSL 的默认设置，包括一个用于密钥交换的1024位密钥。因为我们正在使用2048位证书，DHE 客户端就会使用一个要比非 DHE 客户端更弱的密钥交换。</p>
<p>我们需要生成一个更强壮的 DHE 参数：</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">cd</span> /etc/ssl/certs
$ openssl dhparam -out dhparam.pem 4096
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>然后告诉 nginx 将其用作 DHE 密钥交换：</p>
<pre><code>ssl_dhparam /etc/ssl/certs/dhparam.pem;
</code></pre><h5 id="OCSP-装订（Stapling）"><a href="#OCSP-装订（Stapling）" class="headerlink" title="OCSP 装订（Stapling）"></a>OCSP 装订（Stapling）</h5><p>当连接到一个服务器时，客户端应该使用证书吊销列表（CRL）或在线证书状态协议（OCSP）记录来校验服务器证书的有效性。CRL 的问题是它已经增长的太大了，永远也下载不完了。</p>
<p>OCSP 更轻量级一些，因为我们每次只请求一条记录。但是副作用是当连接到一个服务器时必须对第三方 OCSP 响应器发起 OCSP 请求，这就增加了延迟和带来了潜在隐患。事实上，CA 所运营的 OCSP 响应器非常不可靠，浏览器如果不能及时收到答复，就会静默失败。攻击者通过 DoS 攻击一个 OCSP 响应器可以禁用其校验功能，这样就降低了安全性。</p>
<p>解决方法是允许服务器在 TLS 握手中发送缓存的 OCSP 记录，以绕开 OCSP 响应器。这个机制节省了客户端和 OCSP 响应器之间的通讯，称作 OCSP 装订。</p>
<p>客户端会在它的 CLIENT HELLO 中告知其支持 status_request TLS 扩展，服务器仅在客户端请求它的时候才发送缓存的 OCSP 响应。</p>
<p>大多数服务器最多会缓存 OCSP 响应48小时。服务器会按照常规的间隔连接到 CA 的 OCSP 响应器来获取刷新的 OCSP 记录。OCSP 响应器的位置可以从签名的证书中的授权信息访问（Authority Information Access）字段中获得。</p>
<ul>
<li><a href="https://raymii.org/s/tutorials/OCSP_Stapling_on_nginx.html" target="_blank" rel="noopener">阅读我的教程：在 NGINX 中启用 OCSP 装订</a></li>
</ul>
<h5 id="HTTP-严格传输安全（HSTS）"><a href="#HTTP-严格传输安全（HSTS）" class="headerlink" title="HTTP 严格传输安全（HSTS）"></a>HTTP 严格传输安全（HSTS）</h5><p>如有可能，你应该启用<a href="https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security" target="_blank" rel="noopener">HTTP 严格传输安全（HSTS）</a>，它会引导浏览器和你的站点之间的通讯仅通过 HTTPS。</p>
<ul>
<li><a href="https://linux.cn/article-5266-1.html" target="_blank" rel="noopener">阅读我关于 HSTS 的文章，了解如何配置它</a></li>
</ul>
<h5 id="HTTP-公钥固定扩展（HPKP）"><a href="#HTTP-公钥固定扩展（HPKP）" class="headerlink" title="HTTP 公钥固定扩展（HPKP）"></a>HTTP 公钥固定扩展（HPKP）</h5><p>你也应该启用<a href="https://wiki.mozilla.org/SecurityEngineering/Public_Key_Pinning" target="_blank" rel="noopener">HTTP 公钥固定扩展（HPKP）</a>。</p>
<p>公钥固定的意思是一个证书链必须包括一个白名单中的公钥。它确保仅有白名单中的 CA 才能够为某个域名签署证书，而不是你的浏览器中存储的任何 CA。</p>
<p>我已经写了一篇<a href="https://linux.cn/article-5282-1.html" target="_blank" rel="noopener">]关于 HPKP 的背景理论及在 Apache、Lighttpd 和 NGINX 中配置例子的文章</a>。</p>
<h4 id="调整服务器"><a href="#调整服务器" class="headerlink" title="调整服务器"></a>调整服务器</h4><h5 id="野兽攻击（BEAST）和-RC4"><a href="#野兽攻击（BEAST）和-RC4" class="headerlink" title="野兽攻击（BEAST）和 RC4"></a>野兽攻击（BEAST）和 RC4</h5><p>简单的说，野兽攻击（BEAST）就是通过篡改一个加密算法的 CBC（密码块链）的模式，从而可以对部分编码流量悄悄解码。更多信息参照上面的链接。</p>
<p>针对野兽攻击（BEAST），较新的浏览器已经启用了客户端缓解方案。推荐方案是禁用 TLS 1.0 的所有加密算法，仅允许 RC4 算法。然而，<a href="http://www.isg.rhul.ac.uk/tls/" target="_blank" rel="noopener">]针对 RC4 算法的攻击也越来越多</a> ，很多已经从理论上逐步发展为实际可行的攻击方式。此外，有理由相信 NSA 已经实现了他们所谓的“大突破”——攻破 RC4 。</p>
<p>禁用 RC4 会有几个后果。其一，当用户使用老旧的浏览器时，比如 Windows XP 上的 IE 会用 3DES 来替代 RC4。3DES 要比 RC4 更安全，但是它的计算成本更高，你的服务器就需要为这些用户付出更多的处理成本。其二，RC4 算法能减轻 野兽攻击（BEAST）的危害，如果禁用 RC4 会导致 TLS 1.0 用户会换到更容易受攻击的 AES-CBC 算法上（通常服务器端的对野兽攻击（BEAST）的“修复方法”是让 RC4 优先于其它算法）。我认为 RC4 的风险要高于野兽攻击（BEAST）的风险。事实上，有了客户端缓解方案（Chrome 和 Firefox 提供了缓解方案），野兽攻击（BEAST）就不是什么大问题了。而 RC4 的风险却在增长：随着时间推移，对加密算法的破解会越来越多。</p>
<h5 id="怪物攻击（FREAK）"><a href="#怪物攻击（FREAK）" class="headerlink" title="怪物攻击（FREAK）"></a>怪物攻击（FREAK）</h5><p>怪物攻击（FREAK）是一种中间人攻击，它是由来自<a href="https://www.smacktls.com/" target="_blank" rel="noopener">INRIA、微软研究院和 IMDEA</a>的密码学家们所发现的。怪物攻击（FREAK）的缩写来自“Factoring RSA-EXPORT Keys（RSA 出口密钥因子分解）”</p>
<p>这个漏洞可上溯到上世纪九十年代，当时美国政府禁止出口加密软件，除非其使用编码密钥长度不超过512位的出口加密套件。</p>
<p>这造成了一些现在的 TLS 客户端存在一个缺陷，这些客户端包括： 苹果的 SecureTransport 、OpenSSL。这个缺陷会导致它们会接受出口降级 RSA 密钥，即便客户端并没有要求使用出口降级 RSA 密钥。这个缺陷带来的影响很讨厌：在客户端存在缺陷，且服务器支持出口降级 RSA 密钥时，会发生中间人攻击，从而导致连接的强度降低。</p>
<p>攻击分为两个组成部分：首先是服务器必须接受“出口降级 RSA 密钥”。</p>
<p>中间人攻击可以按如下流程：</p>
<p>在客户端的 Hello 消息中，要求标准的 RSA 加密套件。<br>中间人攻击者修改该消息为‘export RSA’（输出级 RSA 密钥）。<br>服务器回应一个512位的输出级 RSA 密钥，并以其长期密钥签名。<br>由于 OpenSSL/SecureTransport 的缺陷，客户端会接受这个弱密钥。<br>攻击者根据 RSA 模数分解因子来恢复相应的 RSA 解密密钥。<br>当客户端编码‘pre-master secret’（预主密码）给服务器时，攻击者现在就可以解码它并恢复 TLS 的‘master secret’（主密码）。<br>从这里开始，攻击者就能看到了传输的明文并注入任何东西了。<br>本文所提供的加密套件不启用输出降级加密，请确认你的 OpenSSL 是最新的，也强烈建议你将客户端也升级到新的版本。</p>
<h5 id="SSL-压缩（罪恶攻击-CRIME）"><a href="#SSL-压缩（罪恶攻击-CRIME）" class="headerlink" title="SSL 压缩（罪恶攻击 CRIME）"></a>SSL 压缩（罪恶攻击 CRIME）</h5><p>罪恶攻击（CRIME）使用 SSL 压缩来完成它的魔法，SSL 压缩在下述版本是默认关闭的： nginx 1.1.6及更高/1.0.9及更高（如果使用了 OpenSSL 1.0.0及更高）， nginx 1.3.2及更高/1.2.2及更高（如果使用较旧版本的 OpenSSL）。</p>
<p>如果你使用一个早期版本的 nginx 或 OpenSSL，而且你的发行版没有向后移植该选项，那么你需要重新编译没有一个 ZLIB 支持的 OpenSSL。这会禁止 OpenSSL 使用 DEFLATE 压缩方式。如果你禁用了这个，你仍然可以使用常规的 HTML DEFLATE 压缩。</p>
<h5 id="卷毛狗攻击（POODLE）和-TLS-FALLBACK-SCSV"><a href="#卷毛狗攻击（POODLE）和-TLS-FALLBACK-SCSV" class="headerlink" title="卷毛狗攻击（POODLE）和 TLS-FALLBACK-SCSV"></a>卷毛狗攻击（POODLE）和 TLS-FALLBACK-SCSV</h5><p>SSLv3 会受到<a href="https://raymii.org/s/articles/Check_servers_for_the_Poodle_bug.html" target="_blank" rel="noopener">卷毛狗漏洞（POODLE）</a>的攻击。这是禁用 SSLv3 的主要原因之一。</p>
<p>Google 提出了一个名为<a href="https://tools.ietf.org/html/draft-ietf-tls-downgrade-scsv-00" target="_blank" rel="noopener">TLSFALLBACKSCSV</a>的SSL/TLS 扩展，它用于防止强制 SSL 降级。如果你升级 到下述的 OpenSSL 版本会自动启用它。</p>
<ul>
<li>OpenSSL 1.0.1 带有 TLS_FALLBACK_SCSV 1.0.1j 及更高。</li>
<li>OpenSSL 1.0.0 带有 TLS_FALLBACK_SCSV 1.0.0o 及更高。</li>
<li>OpenSSL 0.9.8 带有 TLS_FALLBACK_SCSV 0.9.8zc 及更高。<br><a href="http://wiki.nginx.org/HttpSslModule#ssl_protocols" target="_blank" rel="noopener">更多信息请参照 NGINX 文档</a></li>
</ul>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><h5 id="优先顺序的逻辑"><a href="#优先顺序的逻辑" class="headerlink" title="优先顺序的逻辑"></a>优先顺序的逻辑</h5><ul>
<li>ECDHE+AESGCM 加密是首选的。它们是 TLS 1.2 加密算法，现在还没有广泛支持。当前还没有对它们的已知攻击。</li>
<li>PFS 加密套件好一些，首选 ECDHE，然后是 DHE。</li>
<li>AES 128 要好于 AES 256。有一个关于 AES256 带来的安全提升程度是否值回成本的讨论，结果是显而易见的。目前，AES128 要更值一些，因为它提供了不错的安全水准，确实很快，而且看起来对时序攻击更有抵抗力。</li>
<li>在向后兼容的加密套件里面，AES 要优于 3DES。在 TLS 1.1及其以上，减轻了针对 AES 的野兽攻击（BEAST）的威胁，而在 TLS 1.0上则难以实现该攻击。在非向后兼容的加密套件里面，不支持 3DES。</li>
<li>RC4 整个不支持了。3DES 用于向后兼容。参看<a href="https://wiki.mozilla.org/Security/Server_Side_TLS#RC4_weaknesses" target="_blank" rel="noopener">#RC4_weaknesses</a>中的讨论。<h5 id="强制丢弃的算法"><a href="#强制丢弃的算法" class="headerlink" title="强制丢弃的算法"></a>强制丢弃的算法</h5></li>
<li>aNULL 包含了非验证的 Diffie-Hellman 密钥交换，这会受到中间人（MITM）攻击</li>
<li>eNULL 包含了无加密的算法（明文）</li>
<li>EXPORT 是老旧的弱加密算法，是被美国法律标示为可出口的</li>
<li>RC4 包含的加密算法使用了已弃用的 ARCFOUR 算法</li>
<li>DES 包含的加密算法使用了弃用的数据加密标准（DES）</li>
<li>SSLv2 包含了定义在旧版本 SSL 标准中的所有算法，现已弃用</li>
<li>MD5 包含了使用已弃用的 MD5 作为哈希算法的所有算法</li>
</ul>
<h3 id="配置范例"><a href="#配置范例" class="headerlink" title="配置范例"></a>配置范例</h3><pre><code>server {

  listen [::]:443 default_server;

  ssl on;
  ssl_certificate_key /etc/ssl/cert/raymii_org.pem;
  ssl_certificate /etc/ssl/cert/ca-bundle.pem;

  ssl_ciphers &#39;AES128+EECDH:AES128+EDH:!aNULL&#39;;

  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
  ssl_session_cache shared:SSL:10m;

  ssl_stapling on;
  ssl_stapling_verify on;
  resolver 8.8.4.4 8.8.8.8 valid=300s;
  resolver_timeout 10s;

  ssl_prefer_server_ciphers on;
  ssl_dhparam /etc/ssl/certs/dhparam.pem;

  add_header Strict-Transport-Security max-age=63072000;
  add_header X-Frame-Options DENY;
  add_header X-Content-Type-Options nosniff;

  root /var/www/;
  index index.html index.htm;
  server_name raymii.org;

}
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;失踪人口回归系列之第二篇&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="https://blog.halyul.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="教程" scheme="https://blog.halyul.com/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>失踪人口回归系列之增强站点SSL安全性</title>
    <link href="https://blog.halyul.com/posts/imporve-ssl/"/>
    <id>https://blog.halyul.com/posts/imporve-ssl/</id>
    <published>2017-03-22T11:39:00.000Z</published>
    <updated>2017-11-25T09:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>失踪人口回归系列之第二篇<br><a id="more"></a></p>
<p>经过这篇文章后，我的SSL Lab的测试也是A+了。</p>
<ul>
<li>原文地址：<a href="https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html" target="_blank" rel="noopener">https://raymii.org/s/tutorials/Strong_SSL_Security_On_nginx.html</a></li>
<li>原文作者：<a href="https://raymii.org/" target="_blank" rel="noopener">Remy van Elst</a></li>
<li>译者与校对：<a href="https://github.com/wxy" target="_blank" rel="noopener">wxy</a></li>
<li>本文由<a href="https://github.com/LCTT/TranslateProject" target="_blank" rel="noopener">LCTT</a>原创翻译，<a href="http://linux.cn/" target="_blank" rel="noopener">Linux中国</a> 荣誉推出</li>
<li>此为原文重排版</li>
</ul>
<p>本文向你介绍如何在 nginx 服务器上设置健壮的 SSL 安全机制。我们通过禁用 SSL 压缩来降低 CRIME 攻击威胁；禁用协议上存在安全缺陷的 SSLv3 及更低版本，并设置更健壮的加密套件（cipher suite）来尽可能启用前向安全性（Forward Secrecy）；此外，我们还启用了 HSTS 和 HPKP。这样我们就拥有了一个健壮而可经受考验的 SSL 配置，并可以在 Qually Labs 的 SSL 测试中得到 A 级评分。</p>
<p>本教程可以通过<a href="http://blog.ivanristic.com/2014/01/ssl-labs-stricter-security-requirements-for-2014.html" target="_blank" rel="noopener">发布于 2014/1/21 的 SSL 实验室测试的严格要求</a>（我之前就通过了测试，如果你按照本文操作就可以得到一个 A+ 评分）。</p>
<ul>
<li>本教程也可用于 Apache</li>
<li>本教程也可用于 Lighttpd</li>
<li><p>本教程也可用于 FreeBSD, NetBSD 和 OpenBSD 上的 nginx ，放在<a href="http://www.bsdnow.tv/tutorials/nginx" target="_blank" rel="noopener">BSD Now 播客上</a><br>你可以从下列链接中找到这方面的进一步内容：</p>
</li>
<li><p><a href="https://en.wikipedia.org/wiki/Transport_Layer_Security#BEAST_attack" target="_blank" rel="noopener">野兽攻击（BEAST）</a></p>
</li>
<li><a href="https://en.wikipedia.org/wiki/CRIME_%28security_exploit%29" target="_blank" rel="noopener">罪恶攻击（CRIME）</a></li>
<li><a href="http://blog.cryptographyengineering.com/2015/03/attack-of-week-freak-or-factoring-nsa.html" target="_blank" rel="noopener">怪物攻击（FREAK ）</a></li>
<li><a href="http://heartbleed.com/" target="_blank" rel="noopener">心血漏洞（Heartbleed）</a></li>
<li><a href="https://en.wikipedia.org/wiki/Perfect_forward_secrecy" target="_blank" rel="noopener">完备的前向安全性（Perfect Forward Secrecy）</a></li>
<li><a href="https://en.wikipedia.org/wiki/Transport_Layer_Security#Dealing_with_RC4_and_BEAST" target="_blank" rel="noopener">RC4 和 BEAST 的处理</a></li>
</ul>
<p><strong><big>在编辑之前切记备份一下配置文件！</big></strong></p>
<h3 id="我是懒人"><a href="#我是懒人" class="headerlink" title="我是懒人"></a>我是懒人</h3><p>那你直接看我从<a href="https://cipherli.st/" target="_blank" rel="noopener">Cipherli.st</a>上得到的内容复制粘贴到你的站点配置就好了。</p>
<h4 id="Apache"><a href="#Apache" class="headerlink" title="Apache"></a>Apache</h4><pre><code>SSLCipherSuite EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH
SSLProtocol All -SSLv2 -SSLv3
SSLHonorCipherOrder On
# HSTS
Header always set Strict-Transport-Security &quot;max-age=63072000; includeSubDomains; preload&quot;
Header always set X-Frame-Options DENY
Header always set X-Content-Type-Options nosniff
# Apache版本 &gt;= 2.4
SSLCompression off
SSLUseStapling on
SSLStaplingCache &quot;shmcb:logs/stapling-cache(150000)&quot;
# Apache版本 &gt;= 2.4.11
SSLSessionTickets Off
</code></pre><h4 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h4><pre><code>ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
ssl_prefer_server_ciphers on;
ssl_ciphers &quot;EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH&quot;;
ssl_ecdh_curve secp384r1; # nginx版本 &gt;= 1.1.0
ssl_session_cache shared:SSL:10m;
ssl_session_tickets off; # nginx版本 &gt;= 1.5.9
ssl_stapling on; # Requires nginx &gt;= 1.3.7
ssl_stapling_verify on; # nginx版本 =&gt; 1.3.7
resolver $DNS-IP-1 $DNS-IP-2 valid=300s; # 此处将$DNS-IP-1和$DNS-IP-2更换为DNS服务商的IP
resolver_timeout 5s;
add_header Strict-Transport-Security &quot;max-age=63072000; #HSTS includeSubDomains; preload&quot;;
add_header X-Frame-Options DENY;
add_header X-Content-Type-Options nosniff;
</code></pre><h4 id="Lighttpd"><a href="#Lighttpd" class="headerlink" title="Lighttpd"></a>Lighttpd</h4><pre><code>ssl.honor-cipher-order = &quot;enable&quot;
ssl.cipher-list = &quot;EECDH+AESGCM:EDH+AESGCM:AES256+EECDH:AES256+EDH&quot;
ssl.use-compression = &quot;disable&quot;
setenv.add-response-header = (
    &quot;Strict-Transport-Security&quot; =&gt; &quot;max-age=63072000; includeSubDomains; preload&quot;,
    &quot;X-Frame-Options&quot; =&gt; &quot;DENY&quot;,
    &quot;X-Content-Type-Options&quot; =&gt; &quot;nosniff&quot;
)
ssl.use-sslv2 = &quot;disable&quot;
ssl.use-sslv3 = &quot;disable&quot;
</code></pre><h3 id="我不是懒人"><a href="#我不是懒人" class="headerlink" title="我不是懒人"></a>我不是懒人</h3><h4 id="方便快捷修改站点配置文件"><a href="#方便快捷修改站点配置文件" class="headerlink" title="方便快捷修改站点配置文件"></a>方便快捷修改站点配置文件</h4><h5 id="SSLv2-和-SSLv3"><a href="#SSLv2-和-SSLv3" class="headerlink" title="SSLv2 和 SSLv3"></a>SSLv2 和 SSLv3</h5><p>SSLv2 是不安全的，所以我们需要禁用它。我们也禁用 SSLv3，因为 TLS 1.0 在遭受到降级攻击时，会允许攻击者强制连接使用 SSLv3，从而禁用了前向安全性（forward secrecy）。</p>
<p>编辑站点配置文件：</p>
<pre><code>ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
</code></pre><h5 id="加密套件（cipher-suite）"><a href="#加密套件（cipher-suite）" class="headerlink" title="加密套件（cipher suite）"></a>加密套件（cipher suite）</h5><p>前向安全性（Forward Secrecy）用于在长期密钥被破解时确保会话密钥的完整性。PFS（完备的前向安全性）是指强制在每个/每次会话中推导新的密钥。</p>
<p>这就是说，泄露的私钥并不能用来解密（之前）记录下来的 SSL 通讯。</p>
<p>提供PFS（完备的前向安全性）功能的是那些使用了一种 Diffie-Hellman 密钥交换的短暂形式的加密套件。它们的缺点是系统开销较大，不过可以使用椭圆曲线的变体来改进。</p>
<p>以下两个加密套件是我推荐的，之后<a href="https://wiki.mozilla.org/Security/Server_Side_TLS" target="_blank" rel="noopener">Mozilla 基金会</a>也推荐了。</p>
<p>推荐的加密套件：</p>
<pre><code>ssl_ciphers &#39;AES128+EECDH:AES128+EDH&#39;;
</code></pre><p>向后兼容的推荐的加密套件（IE6/WinXP）：</p>
<pre><code>ssl_ciphers &quot;ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES256-GCM-SHA384:AES128-GCM-SHA256:AES256-SHA256:AES128-SHA256:AES256-SHA:AES128-SHA:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!MD5:!PSK:!RC4&quot;;
</code></pre><p>如果你的 OpenSSL 版本比较旧，不可用的加密算法会自动丢弃。应该一直使用上述的完整套件，让 OpenSSL 选择一个它所支持的。</p>
<p>加密套件的顺序是非常重要的，因为其决定了优先选择哪个算法。上述优先推荐的算法中提供了PFS（完备的前向安全性）。</p>
<p>较旧版本的 OpenSSL 也许不能支持这个算法的完整列表，AES-GCM 和一些 ECDHE 算法是相当新的，在 Ubuntu 和 RHEL 中所带的绝大多数 OpenSSL 版本中不支持。</p>
<h5 id="更多设置"><a href="#更多设置" class="headerlink" title="更多设置"></a>更多设置</h5><p>确保你也添加了如下行：</p>
<pre><code>ssl_prefer_server_ciphers on;
ssl_session_cache shared:SSL:10m;
</code></pre><p>在一个 SSLv3 或 TLSv1 握手过程中选择一个加密算法时，一般使用客户端的首选算法。如果设置了上述配置，则会替代地使用服务器端的首选算法。</p>
<ul>
<li><a href="http://wiki.nginx.org/HttpSslModule#ssl_prefer_server_ciphers" target="_blank" rel="noopener">关于 ssl_prefer_server_ciphers 的更多信息</a></li>
<li><a href="http://wiki.nginx.org/HttpSslModule#ssl_ciphers" target="_blank" rel="noopener">关于 ssl_ciphers 的更多信息</a></li>
</ul>
<h5 id="前向安全性和-Diffie-Hellman-Ephemeral-（DHE）参数"><a href="#前向安全性和-Diffie-Hellman-Ephemeral-（DHE）参数" class="headerlink" title="前向安全性和 Diffie Hellman Ephemeral （DHE）参数"></a>前向安全性和 Diffie Hellman Ephemeral （DHE）参数</h5><p>前向安全性（Forward Secrecy）的概念很简单：客户端和服务器协商一个永不重用的密钥，并在会话结束时销毁它。服务器上的 RSA 私钥用于客户端和服务器之间的 Diffie-Hellman 密钥交换签名。从 Diffie-Hellman 握手中获取的预主密钥会用于之后的编码。因为预主密钥是特定于客户端和服务器之间建立的某个连接，并且只用在一个限定的时间内，所以称作短暂模式（Ephemeral）。</p>
<p>使用了前向安全性，如果一个攻击者取得了一个服务器的私钥，他是不能解码之前的通讯信息的。这个私钥仅用于 Diffie Hellman 握手签名，并不会泄露预主密钥。Diffie Hellman 算法会确保预主密钥绝不会离开客户端和服务器，而且不能被中间人攻击所拦截。</p>
<p>所有版本的 nginx（如1.4.4）都依赖于 OpenSSL 给 Diffie-Hellman （DH）的输入参数。不幸的是，这意味着 Diffie-Hellman Ephemeral（DHE）将使用 OpenSSL 的默认设置，包括一个用于密钥交换的1024位密钥。因为我们正在使用2048位证书，DHE 客户端就会使用一个要比非 DHE 客户端更弱的密钥交换。</p>
<p>我们需要生成一个更强壮的 DHE 参数：</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">cd</span> /etc/ssl/certs
$ openssl dhparam -out dhparam.pem 4096
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>然后告诉 nginx 将其用作 DHE 密钥交换：</p>
<pre><code>ssl_dhparam /etc/ssl/certs/dhparam.pem;
</code></pre><h5 id="OCSP-装订（Stapling）"><a href="#OCSP-装订（Stapling）" class="headerlink" title="OCSP 装订（Stapling）"></a>OCSP 装订（Stapling）</h5><p>当连接到一个服务器时，客户端应该使用证书吊销列表（CRL）或在线证书状态协议（OCSP）记录来校验服务器证书的有效性。CRL 的问题是它已经增长的太大了，永远也下载不完了。</p>
<p>OCSP 更轻量级一些，因为我们每次只请求一条记录。但是副作用是当连接到一个服务器时必须对第三方 OCSP 响应器发起 OCSP 请求，这就增加了延迟和带来了潜在隐患。事实上，CA 所运营的 OCSP 响应器非常不可靠，浏览器如果不能及时收到答复，就会静默失败。攻击者通过 DoS 攻击一个 OCSP 响应器可以禁用其校验功能，这样就降低了安全性。</p>
<p>解决方法是允许服务器在 TLS 握手中发送缓存的 OCSP 记录，以绕开 OCSP 响应器。这个机制节省了客户端和 OCSP 响应器之间的通讯，称作 OCSP 装订。</p>
<p>客户端会在它的 CLIENT HELLO 中告知其支持 status_request TLS 扩展，服务器仅在客户端请求它的时候才发送缓存的 OCSP 响应。</p>
<p>大多数服务器最多会缓存 OCSP 响应48小时。服务器会按照常规的间隔连接到 CA 的 OCSP 响应器来获取刷新的 OCSP 记录。OCSP 响应器的位置可以从签名的证书中的授权信息访问（Authority Information Access）字段中获得。</p>
<ul>
<li><a href="https://raymii.org/s/tutorials/OCSP_Stapling_on_nginx.html" target="_blank" rel="noopener">阅读我的教程：在 NGINX 中启用 OCSP 装订</a></li>
</ul>
<h5 id="HTTP-严格传输安全（HSTS）"><a href="#HTTP-严格传输安全（HSTS）" class="headerlink" title="HTTP 严格传输安全（HSTS）"></a>HTTP 严格传输安全（HSTS）</h5><p>如有可能，你应该启用<a href="https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security" target="_blank" rel="noopener">HTTP 严格传输安全（HSTS）</a>，它会引导浏览器和你的站点之间的通讯仅通过 HTTPS。</p>
<ul>
<li><a href="https://linux.cn/article-5266-1.html" target="_blank" rel="noopener">阅读我关于 HSTS 的文章，了解如何配置它</a></li>
</ul>
<h5 id="HTTP-公钥固定扩展（HPKP）"><a href="#HTTP-公钥固定扩展（HPKP）" class="headerlink" title="HTTP 公钥固定扩展（HPKP）"></a>HTTP 公钥固定扩展（HPKP）</h5><p>你也应该启用<a href="https://wiki.mozilla.org/SecurityEngineering/Public_Key_Pinning" target="_blank" rel="noopener">HTTP 公钥固定扩展（HPKP）</a>。</p>
<p>公钥固定的意思是一个证书链必须包括一个白名单中的公钥。它确保仅有白名单中的 CA 才能够为某个域名签署证书，而不是你的浏览器中存储的任何 CA。</p>
<p>我已经写了一篇<a href="https://linux.cn/article-5282-1.html" target="_blank" rel="noopener">]关于 HPKP 的背景理论及在 Apache、Lighttpd 和 NGINX 中配置例子的文章</a>。</p>
<h4 id="调整服务器"><a href="#调整服务器" class="headerlink" title="调整服务器"></a>调整服务器</h4><h5 id="野兽攻击（BEAST）和-RC4"><a href="#野兽攻击（BEAST）和-RC4" class="headerlink" title="野兽攻击（BEAST）和 RC4"></a>野兽攻击（BEAST）和 RC4</h5><p>简单的说，野兽攻击（BEAST）就是通过篡改一个加密算法的 CBC（密码块链）的模式，从而可以对部分编码流量悄悄解码。更多信息参照上面的链接。</p>
<p>针对野兽攻击（BEAST），较新的浏览器已经启用了客户端缓解方案。推荐方案是禁用 TLS 1.0 的所有加密算法，仅允许 RC4 算法。然而，<a href="http://www.isg.rhul.ac.uk/tls/" target="_blank" rel="noopener">]针对 RC4 算法的攻击也越来越多</a> ，很多已经从理论上逐步发展为实际可行的攻击方式。此外，有理由相信 NSA 已经实现了他们所谓的“大突破”——攻破 RC4 。</p>
<p>禁用 RC4 会有几个后果。其一，当用户使用老旧的浏览器时，比如 Windows XP 上的 IE 会用 3DES 来替代 RC4。3DES 要比 RC4 更安全，但是它的计算成本更高，你的服务器就需要为这些用户付出更多的处理成本。其二，RC4 算法能减轻 野兽攻击（BEAST）的危害，如果禁用 RC4 会导致 TLS 1.0 用户会换到更容易受攻击的 AES-CBC 算法上（通常服务器端的对野兽攻击（BEAST）的“修复方法”是让 RC4 优先于其它算法）。我认为 RC4 的风险要高于野兽攻击（BEAST）的风险。事实上，有了客户端缓解方案（Chrome 和 Firefox 提供了缓解方案），野兽攻击（BEAST）就不是什么大问题了。而 RC4 的风险却在增长：随着时间推移，对加密算法的破解会越来越多。</p>
<h5 id="怪物攻击（FREAK）"><a href="#怪物攻击（FREAK）" class="headerlink" title="怪物攻击（FREAK）"></a>怪物攻击（FREAK）</h5><p>怪物攻击（FREAK）是一种中间人攻击，它是由来自<a href="https://www.smacktls.com/" target="_blank" rel="noopener">INRIA、微软研究院和 IMDEA</a>的密码学家们所发现的。怪物攻击（FREAK）的缩写来自“Factoring RSA-EXPORT Keys（RSA 出口密钥因子分解）”</p>
<p>这个漏洞可上溯到上世纪九十年代，当时美国政府禁止出口加密软件，除非其使用编码密钥长度不超过512位的出口加密套件。</p>
<p>这造成了一些现在的 TLS 客户端存在一个缺陷，这些客户端包括： 苹果的 SecureTransport 、OpenSSL。这个缺陷会导致它们会接受出口降级 RSA 密钥，即便客户端并没有要求使用出口降级 RSA 密钥。这个缺陷带来的影响很讨厌：在客户端存在缺陷，且服务器支持出口降级 RSA 密钥时，会发生中间人攻击，从而导致连接的强度降低。</p>
<p>攻击分为两个组成部分：首先是服务器必须接受“出口降级 RSA 密钥”。</p>
<p>中间人攻击可以按如下流程：</p>
<p>在客户端的 Hello 消息中，要求标准的 RSA 加密套件。<br>中间人攻击者修改该消息为‘export RSA’（输出级 RSA 密钥）。<br>服务器回应一个512位的输出级 RSA 密钥，并以其长期密钥签名。<br>由于 OpenSSL/SecureTransport 的缺陷，客户端会接受这个弱密钥。<br>攻击者根据 RSA 模数分解因子来恢复相应的 RSA 解密密钥。<br>当客户端编码‘pre-master secret’（预主密码）给服务器时，攻击者现在就可以解码它并恢复 TLS 的‘master secret’（主密码）。<br>从这里开始，攻击者就能看到了传输的明文并注入任何东西了。<br>本文所提供的加密套件不启用输出降级加密，请确认你的 OpenSSL 是最新的，也强烈建议你将客户端也升级到新的版本。</p>
<h5 id="SSL-压缩（罪恶攻击-CRIME）"><a href="#SSL-压缩（罪恶攻击-CRIME）" class="headerlink" title="SSL 压缩（罪恶攻击 CRIME）"></a>SSL 压缩（罪恶攻击 CRIME）</h5><p>罪恶攻击（CRIME）使用 SSL 压缩来完成它的魔法，SSL 压缩在下述版本是默认关闭的： nginx 1.1.6及更高/1.0.9及更高（如果使用了 OpenSSL 1.0.0及更高）， nginx 1.3.2及更高/1.2.2及更高（如果使用较旧版本的 OpenSSL）。</p>
<p>如果你使用一个早期版本的 nginx 或 OpenSSL，而且你的发行版没有向后移植该选项，那么你需要重新编译没有一个 ZLIB 支持的 OpenSSL。这会禁止 OpenSSL 使用 DEFLATE 压缩方式。如果你禁用了这个，你仍然可以使用常规的 HTML DEFLATE 压缩。</p>
<h5 id="卷毛狗攻击（POODLE）和-TLS-FALLBACK-SCSV"><a href="#卷毛狗攻击（POODLE）和-TLS-FALLBACK-SCSV" class="headerlink" title="卷毛狗攻击（POODLE）和 TLS-FALLBACK-SCSV"></a>卷毛狗攻击（POODLE）和 TLS-FALLBACK-SCSV</h5><p>SSLv3 会受到<a href="https://raymii.org/s/articles/Check_servers_for_the_Poodle_bug.html" target="_blank" rel="noopener">卷毛狗漏洞（POODLE）</a>的攻击。这是禁用 SSLv3 的主要原因之一。</p>
<p>Google 提出了一个名为<a href="https://tools.ietf.org/html/draft-ietf-tls-downgrade-scsv-00" target="_blank" rel="noopener">TLSFALLBACKSCSV</a>的SSL/TLS 扩展，它用于防止强制 SSL 降级。如果你升级 到下述的 OpenSSL 版本会自动启用它。</p>
<ul>
<li>OpenSSL 1.0.1 带有 TLS_FALLBACK_SCSV 1.0.1j 及更高。</li>
<li>OpenSSL 1.0.0 带有 TLS_FALLBACK_SCSV 1.0.0o 及更高。</li>
<li>OpenSSL 0.9.8 带有 TLS_FALLBACK_SCSV 0.9.8zc 及更高。<br><a href="http://wiki.nginx.org/HttpSslModule#ssl_protocols" target="_blank" rel="noopener">更多信息请参照 NGINX 文档</a></li>
</ul>
<h4 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h4><h5 id="优先顺序的逻辑"><a href="#优先顺序的逻辑" class="headerlink" title="优先顺序的逻辑"></a>优先顺序的逻辑</h5><ul>
<li>ECDHE+AESGCM 加密是首选的。它们是 TLS 1.2 加密算法，现在还没有广泛支持。当前还没有对它们的已知攻击。</li>
<li>PFS 加密套件好一些，首选 ECDHE，然后是 DHE。</li>
<li>AES 128 要好于 AES 256。有一个关于 AES256 带来的安全提升程度是否值回成本的讨论，结果是显而易见的。目前，AES128 要更值一些，因为它提供了不错的安全水准，确实很快，而且看起来对时序攻击更有抵抗力。</li>
<li>在向后兼容的加密套件里面，AES 要优于 3DES。在 TLS 1.1及其以上，减轻了针对 AES 的野兽攻击（BEAST）的威胁，而在 TLS 1.0上则难以实现该攻击。在非向后兼容的加密套件里面，不支持 3DES。</li>
<li>RC4 整个不支持了。3DES 用于向后兼容。参看<a href="https://wiki.mozilla.org/Security/Server_Side_TLS#RC4_weaknesses" target="_blank" rel="noopener">#RC4_weaknesses</a>中的讨论。<h5 id="强制丢弃的算法"><a href="#强制丢弃的算法" class="headerlink" title="强制丢弃的算法"></a>强制丢弃的算法</h5></li>
<li>aNULL 包含了非验证的 Diffie-Hellman 密钥交换，这会受到中间人（MITM）攻击</li>
<li>eNULL 包含了无加密的算法（明文）</li>
<li>EXPORT 是老旧的弱加密算法，是被美国法律标示为可出口的</li>
<li>RC4 包含的加密算法使用了已弃用的 ARCFOUR 算法</li>
<li>DES 包含的加密算法使用了弃用的数据加密标准（DES）</li>
<li>SSLv2 包含了定义在旧版本 SSL 标准中的所有算法，现已弃用</li>
<li>MD5 包含了使用已弃用的 MD5 作为哈希算法的所有算法</li>
</ul>
<h3 id="配置范例"><a href="#配置范例" class="headerlink" title="配置范例"></a>配置范例</h3><pre><code>server {

  listen [::]:443 default_server;

  ssl on;
  ssl_certificate_key /etc/ssl/cert/raymii_org.pem;
  ssl_certificate /etc/ssl/cert/ca-bundle.pem;

  ssl_ciphers &#39;AES128+EECDH:AES128+EDH:!aNULL&#39;;

  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
  ssl_session_cache shared:SSL:10m;

  ssl_stapling on;
  ssl_stapling_verify on;
  resolver 8.8.4.4 8.8.8.8 valid=300s;
  resolver_timeout 10s;

  ssl_prefer_server_ciphers on;
  ssl_dhparam /etc/ssl/certs/dhparam.pem;

  add_header Strict-Transport-Security max-age=63072000;
  add_header X-Frame-Options DENY;
  add_header X-Content-Type-Options nosniff;

  root /var/www/;
  index index.html index.htm;
  server_name raymii.org;

}
</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;失踪人口回归系列之第二篇&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="https://blog.halyul.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="教程" scheme="https://blog.halyul.com/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>失踪人口回归系列之在VPS上搭建HEXO的GIT部署环境</title>
    <link href="https://blog.halyul.com/posts/vps-hexo%20(copy)/"/>
    <id>https://blog.halyul.com/posts/vps-hexo (copy)/</id>
    <published>2017-03-22T09:53:00.000Z</published>
    <updated>2017-11-25T09:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>失踪人口回归系列之第一篇<br><a id="more"></a></p>
<h2 id="写在开头"><a href="#写在开头" class="headerlink" title="写在开头"></a>写在开头</h2><p>由于HEXO是静态博客，越来越多的人选择在GitHub, Coding等Pages服务提供商处搭建自己的博客，从而省下买网页空间或VPS的钱。</p>
<p>然而有部分人会选择在VPS上使用HEXO，但是却发现远不如使用Pages服务方便，但看完这篇文章，你就会发现，这并没有想象中那么<del>方便</del>难。</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul>
<li><del>一台电脑</del></li>
<li><del>一台VPS</del></li>
<li><del>一个打开本页面的浏览器</del></li>
</ul>
<h3 id="本地环境"><a href="#本地环境" class="headerlink" title="本地环境"></a>本地环境</h3><h4 id="现在本地上安装Node-js和git"><a href="#现在本地上安装Node-js和git" class="headerlink" title="现在本地上安装Node.js和git"></a>现在本地上安装Node.js和git</h4><p>请访问<a href="https://nodejs.org/en/download/package-manager/" target="_blank" rel="noopener">Installing Node.js via package manager</a>，安装你系统的对应版本。</p>
<h4 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h4><pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">npm</span> i -g hexo-cli
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p>如果你有<code>cnpm</code>, 只需要将<code>npm</code>替换成<code>cnpm</code></p>
</blockquote>
<h4 id="创建Hexo"><a href="#创建Hexo" class="headerlink" title="创建Hexo"></a>创建Hexo</h4><pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">mkdir</span> /path/to/hexo
$ <span class="token function">cd</span> /path/to/hexo
$ hexo init
$ hexo s
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>其中<code>/path/to/hexo</code>为你想要存放Hexo数据的地方</p>
</blockquote>
<p>如果<code>hexo init</code>过程中安装终端，请执行</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">cd</span> /path/to/hexo
$ <span class="token function">npm</span> i
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>打开<a href="localhost:4000" target="_blank" rel="noopener">localhost:4000</a>, 如若看见Hexo初始页面则Hexo安装成功。</p>
<h4 id="生成SSH公钥密钥"><a href="#生成SSH公钥密钥" class="headerlink" title="生成SSH公钥密钥"></a>生成SSH公钥密钥</h4><blockquote>
<p>由于我曾经进过此步发现并没有什么用，故而以下内容皆为引用自<a href="https://blog.viosey.com/2016/10/05/hexo-vps-git/#生成-SSH-公钥密钥" target="_blank" rel="noopener">Viosey</a>。<br>经实测此步可忽略，区别在于<code>hexo d</code>过程是否需要输入密码。</p>
</blockquote>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">cd</span> ~/.ssh
$ ssh-keygen
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>它先要求你确认保存公钥的位置（.ssh/id_rsa），然后它会让你重复一个密码两次，如果不想在使用公钥的时候输入密码，可以留空。</p>
<p><a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/" target="_blank" rel="noopener">GitHub Help - Generating a new SSH key and adding it to the ssh-agent</a></p>
<h3 id="服务器环境"><a href="#服务器环境" class="headerlink" title="服务器环境"></a>服务器环境</h3><h4 id="安装Git-amp-Node-js"><a href="#安装Git-amp-Node-js" class="headerlink" title="安装Git &amp; Node.js"></a>安装Git &amp; Node.js</h4><h5 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h5><pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">git</span>
$ curl -sL https://deb.nodesource.com/setup_6.x <span class="token operator">|</span> <span class="token function">sudo</span> -E <span class="token function">bash</span> -
$ <span class="token function">apt-get</span> <span class="token function">install</span> -y nodejs
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>此为 Node.js v6</p>
<p>若想安装其他版本，请更改为<br>Node.js v7</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ curl -sL https://deb.nodesource.com/setup_7.x <span class="token operator">|</span> <span class="token function">sudo</span> -E <span class="token function">bash</span> -
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h5 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h5><pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ curl -sL https://rpm.nodesource.com/setup <span class="token operator">|</span> <span class="token function">bash</span> -
$ yum <span class="token function">install</span> -y nodejs
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>此为 Node.js 0.10</p>
<p>若想安装其他版本，请更改为<br>Node.js v7</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ curl --silent --location https://rpm.nodesource.com/setup_7.x <span class="token operator">|</span> <span class="token function">bash</span> -
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Node.js v6 LTS</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ curl --silent --location https://rpm.nodesource.com/setup_6.x <span class="token operator">|</span> <span class="token function">bash</span> -
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="创建-git-用户-amp-禁用-git-用户的-shell-登录权限"><a href="#创建-git-用户-amp-禁用-git-用户的-shell-登录权限" class="headerlink" title="创建 git 用户 &amp; 禁用 git 用户的 shell 登录权限"></a>创建 git 用户 &amp; 禁用 git 用户的 shell 登录权限</h4><pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ adduser <span class="token function">git</span>
$ vim /etc/passwd
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>将</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">git:x:1001:1001:,,,:/home/git:/bin/bash
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>改为</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="添加证书登录"><a href="#添加证书登录" class="headerlink" title="添加证书登录"></a>添加证书登录</h4><h5 id="已生成公钥"><a href="#已生成公钥" class="headerlink" title="已生成公钥"></a>已生成公钥</h5><p>把<code>.pub</code>公钥里的内容添加到服务器的<code>/home/git/.ssh/authorized_keys</code>文件中</p>
<h5 id="未生成公钥"><a href="#未生成公钥" class="headerlink" title="未生成公钥"></a>未生成公钥</h5><p>请执行在服务器端执行</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">passwd</span> <span class="token function">git</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>更改git的密码。</p>
<h4 id="建立git仓库"><a href="#建立git仓库" class="headerlink" title="建立git仓库"></a>建立git仓库</h4><pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">mkdir</span> /path/to/repo
$ <span class="token function">cd</span> /path/to/repo
$ <span class="token function">git</span> init --bare hexo.git
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>目录可自行选择。<br>eg.</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">mkdir</span> /home/git/repos
$ <span class="token function">cd</span> /home/git/repos
$ <span class="token function">git</span> init --bare hexo.git
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>然后在<code>/home/git/repos</code>下会有一个<code>hexo.git</code>的文件夹</p>
<blockquote>
<p>使用 –bare 参数，Git 就会创建一个裸仓库，裸仓库没有工作区，我们不会在裸仓库上进行操作，它只为共享而存在。</p>
</blockquote>
<h4 id="配置git-hooks"><a href="#配置git-hooks" class="headerlink" title="配置git hooks"></a>配置git hooks</h4><p>在<code>hexo.git/hooks</code>目录下，执行</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">cd</span> /path/to/hexo.git/hooks
$ <span class="token function">nano</span> post-receive
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<blockquote>
<p>你可以选择自己熟手的编辑器新建这个<code>post-receive</code></p>
</blockquote>
<p>在<code>post-receive</code>中写入如下内容:</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token function">git</span> --work-tree<span class="token operator">=</span>/path/to/your/site --git-dir<span class="token operator">=</span>/path/to/hexo.git checkout -f
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>其中<code>/path/to/your/site</code>为你的站点文件夹，<code>/path/to/hexo.git</code>为你所建立<code>hexo.git</code>的完整路径</p>
<p>eg.</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token function">git</span> --work-tree<span class="token operator">=</span>/var/www/blog.halyul.com --git-dir<span class="token operator">=</span>/home/git/repos/hexo.git checkout -f
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>设置<code>post-receive</code>的可执行权限</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">chmod</span> +x post-receive
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="设置目录拥有者"><a href="#设置目录拥有者" class="headerlink" title="设置目录拥有者"></a>设置目录拥有者</h4><pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">chown</span> -hR git:git /path/to/hexo.git
$ <span class="token function">chown</span> -hR git:git /path/to/your/site
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="本地Hexo配置"><a href="#本地Hexo配置" class="headerlink" title="本地Hexo配置"></a>本地Hexo配置</h2><p>先安装<code>hexo-deployer-git</code>以执行hexo的git部署</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">npm</span> i --save hexo-deployer-git
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>打开hexo目录下的<code>_config.yml</code>，找到<code>deploy</code>进行修改</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> git
    <span class="token key atrule">repo</span><span class="token punctuation">:</span> git@example.com<span class="token punctuation">:</span>hexo.git
    <span class="token key atrule">branch</span><span class="token punctuation">:</span> master
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>其中<code>example.com</code>为你的站点地址或IP</p>
</blockquote>
<h2 id="开始使用"><a href="#开始使用" class="headerlink" title="开始使用"></a>开始使用</h2><p>当你需要生成以及部署hexo时，运行</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ hexo clean <span class="token operator">&amp;&amp;</span> hexo d
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong>大功告成~</strong></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.viosey.com/2016/10/05/hexo-vps-git/" target="_blank" rel="noopener">在 VPS 上搭建 Hexo 博客，使用 Git 部署</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;失踪人口回归系列之第一篇&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="https://blog.halyul.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Hexo" scheme="https://blog.halyul.com/tags/Hexo/"/>
    
      <category term="教程" scheme="https://blog.halyul.com/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>失踪人口回归系列之在VPS上搭建HEXO的GIT部署环境</title>
    <link href="https://blog.halyul.com/posts/vps-hexo/"/>
    <id>https://blog.halyul.com/posts/vps-hexo/</id>
    <published>2017-03-22T09:53:00.000Z</published>
    <updated>2017-11-25T09:58:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>失踪人口回归系列之第一篇<br><a id="more"></a></p>
<h2 id="写在开头"><a href="#写在开头" class="headerlink" title="写在开头"></a>写在开头</h2><p>由于HEXO是静态博客，越来越多的人选择在GitHub, Coding等Pages服务提供商处搭建自己的博客，从而省下买网页空间或VPS的钱。</p>
<p>然而有部分人会选择在VPS上使用HEXO，但是却发现远不如使用Pages服务方便，但看完这篇文章，你就会发现，这并没有想象中那么<del>方便</del>难。</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul>
<li><del>一台电脑</del></li>
<li><del>一台VPS</del></li>
<li><del>一个打开本页面的浏览器</del></li>
</ul>
<h3 id="本地环境"><a href="#本地环境" class="headerlink" title="本地环境"></a>本地环境</h3><h4 id="现在本地上安装Node-js和git"><a href="#现在本地上安装Node-js和git" class="headerlink" title="现在本地上安装Node.js和git"></a>现在本地上安装Node.js和git</h4><p>请访问<a href="https://nodejs.org/en/download/package-manager/" target="_blank" rel="noopener">Installing Node.js via package manager</a>，安装你系统的对应版本。</p>
<h4 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h4><pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">npm</span> i -g hexo-cli
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<blockquote>
<p>如果你有<code>cnpm</code>, 只需要将<code>npm</code>替换成<code>cnpm</code></p>
</blockquote>
<h4 id="创建Hexo"><a href="#创建Hexo" class="headerlink" title="创建Hexo"></a>创建Hexo</h4><pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">mkdir</span> /path/to/hexo
$ <span class="token function">cd</span> /path/to/hexo
$ hexo init
$ hexo s
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>其中<code>/path/to/hexo</code>为你想要存放Hexo数据的地方</p>
</blockquote>
<p>如果<code>hexo init</code>过程中安装终端，请执行</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">cd</span> /path/to/hexo
$ <span class="token function">npm</span> i
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>打开<a href="localhost:4000" target="_blank" rel="noopener">localhost:4000</a>, 如若看见Hexo初始页面则Hexo安装成功。</p>
<h4 id="生成SSH公钥密钥"><a href="#生成SSH公钥密钥" class="headerlink" title="生成SSH公钥密钥"></a>生成SSH公钥密钥</h4><blockquote>
<p>由于我曾经进过此步发现并没有什么用，故而以下内容皆为引用自<a href="https://blog.viosey.com/2016/10/05/hexo-vps-git/#生成-SSH-公钥密钥" target="_blank" rel="noopener">Viosey</a>。<br>经实测此步可忽略，区别在于<code>hexo d</code>过程是否需要输入密码。</p>
</blockquote>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">cd</span> ~/.ssh
$ ssh-keygen
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>它先要求你确认保存公钥的位置（.ssh/id_rsa），然后它会让你重复一个密码两次，如果不想在使用公钥的时候输入密码，可以留空。</p>
<p><a href="https://help.github.com/articles/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent/" target="_blank" rel="noopener">GitHub Help - Generating a new SSH key and adding it to the ssh-agent</a></p>
<h3 id="服务器环境"><a href="#服务器环境" class="headerlink" title="服务器环境"></a>服务器环境</h3><h4 id="安装Git-amp-Node-js"><a href="#安装Git-amp-Node-js" class="headerlink" title="安装Git &amp; Node.js"></a>安装Git &amp; Node.js</h4><h5 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h5><pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">apt-get</span> <span class="token function">install</span> <span class="token function">git</span>
$ curl -sL https://deb.nodesource.com/setup_6.x <span class="token operator">|</span> <span class="token function">sudo</span> -E <span class="token function">bash</span> -
$ <span class="token function">apt-get</span> <span class="token function">install</span> -y nodejs
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>此为 Node.js v6</p>
<p>若想安装其他版本，请更改为<br>Node.js v7</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ curl -sL https://deb.nodesource.com/setup_7.x <span class="token operator">|</span> <span class="token function">sudo</span> -E <span class="token function">bash</span> -
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h5 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h5><pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ curl -sL https://rpm.nodesource.com/setup <span class="token operator">|</span> <span class="token function">bash</span> -
$ yum <span class="token function">install</span> -y nodejs
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>此为 Node.js 0.10</p>
<p>若想安装其他版本，请更改为<br>Node.js v7</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ curl --silent --location https://rpm.nodesource.com/setup_7.x <span class="token operator">|</span> <span class="token function">bash</span> -
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>Node.js v6 LTS</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ curl --silent --location https://rpm.nodesource.com/setup_6.x <span class="token operator">|</span> <span class="token function">bash</span> -
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="创建-git-用户-amp-禁用-git-用户的-shell-登录权限"><a href="#创建-git-用户-amp-禁用-git-用户的-shell-登录权限" class="headerlink" title="创建 git 用户 &amp; 禁用 git 用户的 shell 登录权限"></a>创建 git 用户 &amp; 禁用 git 用户的 shell 登录权限</h4><pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ adduser <span class="token function">git</span>
$ vim /etc/passwd
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>将</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">git:x:1001:1001:,,,:/home/git:/bin/bash
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>改为</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="添加证书登录"><a href="#添加证书登录" class="headerlink" title="添加证书登录"></a>添加证书登录</h4><h5 id="已生成公钥"><a href="#已生成公钥" class="headerlink" title="已生成公钥"></a>已生成公钥</h5><p>把<code>.pub</code>公钥里的内容添加到服务器的<code>/home/git/.ssh/authorized_keys</code>文件中</p>
<h5 id="未生成公钥"><a href="#未生成公钥" class="headerlink" title="未生成公钥"></a>未生成公钥</h5><p>请执行在服务器端执行</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">passwd</span> <span class="token function">git</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>更改git的密码。</p>
<h4 id="建立git仓库"><a href="#建立git仓库" class="headerlink" title="建立git仓库"></a>建立git仓库</h4><pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">mkdir</span> /path/to/repo
$ <span class="token function">cd</span> /path/to/repo
$ <span class="token function">git</span> init --bare hexo.git
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>目录可自行选择。<br>eg.</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">mkdir</span> /home/git/repos
$ <span class="token function">cd</span> /home/git/repos
$ <span class="token function">git</span> init --bare hexo.git
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>然后在<code>/home/git/repos</code>下会有一个<code>hexo.git</code>的文件夹</p>
<blockquote>
<p>使用 –bare 参数，Git 就会创建一个裸仓库，裸仓库没有工作区，我们不会在裸仓库上进行操作，它只为共享而存在。</p>
</blockquote>
<h4 id="配置git-hooks"><a href="#配置git-hooks" class="headerlink" title="配置git hooks"></a>配置git hooks</h4><p>在<code>hexo.git/hooks</code>目录下，执行</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">cd</span> /path/to/hexo.git/hooks
$ <span class="token function">nano</span> post-receive
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<blockquote>
<p>你可以选择自己熟手的编辑器新建这个<code>post-receive</code></p>
</blockquote>
<p>在<code>post-receive</code>中写入如下内容:</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token function">git</span> --work-tree<span class="token operator">=</span>/path/to/your/site --git-dir<span class="token operator">=</span>/path/to/hexo.git checkout -f
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>其中<code>/path/to/your/site</code>为你的站点文件夹，<code>/path/to/hexo.git</code>为你所建立<code>hexo.git</code>的完整路径</p>
<p>eg.</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash"><span class="token shebang important">#!/bin/sh</span>
<span class="token function">git</span> --work-tree<span class="token operator">=</span>/var/www/blog.halyul.com --git-dir<span class="token operator">=</span>/home/git/repos/hexo.git checkout -f
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>设置<code>post-receive</code>的可执行权限</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">chmod</span> +x post-receive
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h4 id="设置目录拥有者"><a href="#设置目录拥有者" class="headerlink" title="设置目录拥有者"></a>设置目录拥有者</h4><pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">chown</span> -hR git:git /path/to/hexo.git
$ <span class="token function">chown</span> -hR git:git /path/to/your/site
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<h2 id="本地Hexo配置"><a href="#本地Hexo配置" class="headerlink" title="本地Hexo配置"></a>本地Hexo配置</h2><p>先安装<code>hexo-deployer-git</code>以执行hexo的git部署</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ <span class="token function">npm</span> i --save hexo-deployer-git
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>打开hexo目录下的<code>_config.yml</code>，找到<code>deploy</code>进行修改</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">deploy</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> git
    <span class="token key atrule">repo</span><span class="token punctuation">:</span> git@example.com<span class="token punctuation">:</span>hexo.git
    <span class="token key atrule">branch</span><span class="token punctuation">:</span> master
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>其中<code>example.com</code>为你的站点地址或IP</p>
</blockquote>
<h2 id="开始使用"><a href="#开始使用" class="headerlink" title="开始使用"></a>开始使用</h2><p>当你需要生成以及部署hexo时，运行</p>
<pre class="line-numbers language-bash" mdui-tooltip="{content: 'bash'}"><code class="language-bash">$ hexo clean <span class="token operator">&amp;&amp;</span> hexo d
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><strong>大功告成~</strong></p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.viosey.com/2016/10/05/hexo-vps-git/" target="_blank" rel="noopener">在 VPS 上搭建 Hexo 博客，使用 Git 部署</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;失踪人口回归系列之第一篇&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="https://blog.halyul.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Hexo" scheme="https://blog.halyul.com/tags/Hexo/"/>
    
      <category term="教程" scheme="https://blog.halyul.com/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>实现主站静态主题更换后，Android手机状态栏随同变色功能</title>
    <link href="https://blog.halyul.com/posts/main-theme-changing%20(copy)/"/>
    <id>https://blog.halyul.com/posts/main-theme-changing (copy)/</id>
    <published>2016-12-31T10:58:00.000Z</published>
    <updated>2016-12-31T13:20:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>主页都不知道给我换了多少次了，用不上了嗯。<br><a id="more"></a></p>
<h2 id="缘由"><a href="#缘由" class="headerlink" title="缘由"></a>缘由</h2><h3 id="大背景"><a href="#大背景" class="headerlink" title="大背景"></a>大背景</h3><p>Android在KitKat时代加入了变色状态栏，而Chrome在版本v39可以通过读取网页中<code>&lt;meta name=&quot;theme-color&quot; content=&quot;#3F51B5&quot;&gt;</code> 这段位于<code>&lt;head&gt;&lt;/head&gt;</code>前的代码实现改变状态栏颜色及地址栏颜色。</p>
<p>![状态栏变色效果][2]![状态栏变色效果][3]<br>[2]: //img.halyul.com/images/2017/03/15/o_1b7viobs21q6h1b0h1p5v13gf1fmra.png<br>[3]: <a href="https://img.halyul.com/images/2017/03/15/o_1b7vioo0s1re04bb1ld73hfgr6a.png" target="_blank" rel="noopener">https://img.halyul.com/images/2017/03/15/o_1b7vioo0s1re04bb1ld73hfgr6a.png</a></p>
<p>来源：[Chrome v39 On Lollipop Supports Custom Multitasking Header/Status Bar Colors With A Simple HTML Tag - Android Police][4]<br>[4]: <a href="http://www.androidpolice.com/2014/11/10/chrome-v39-on-lollipop-supports-custom-multitasking-headerstatus-bar-colors-with-a-simple-html-tag/" target="_blank" rel="noopener">http://www.androidpolice.com/2014/11/10/chrome-v39-on-lollipop-supports-custom-multitasking-headerstatus-bar-colors-with-a-simple-html-tag/</a></p>
<h3 id="小背景"><a href="#小背景" class="headerlink" title="小背景"></a>小背景</h3><p>我的[主站][1]网页代码中有以下几段：<br>[1]: //halyul.cc</p>
<pre class="line-numbers language-js" mdui-tooltip="{content: 'js'}"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> jQuery Cookie <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"js/jquery.cookie.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> $<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'styleCookie'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'style-light.css'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html, body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> <span class="token string">'#eeeeee'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//用户读取到上次访问时，网站的样式为style-light.css，全站背景为白色</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'styleCookie'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'style.css'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html, body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> <span class="token string">'#222222'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//用户读取到上次访问时，网站的样式为style.css，全站背景为黑色</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> jQuery Easing <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"js/jquery.easing.1.3.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这几段是涉及到了主页右上角的主题变换开关——黑白风格的变换。</p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>而作为Androider我，必须得实现状态栏变色啊！所以各种度娘后，找到了[方法][5]。<br>[5]: <a href="https://zhidao.baidu.com/question/936921982308974372.html" target="_blank" rel="noopener">https://zhidao.baidu.com/question/936921982308974372.html</a></p>
<p>我在源代码以及找到的方法的基础上，在上面的代码中添加以下代码：</p>
<pre class="line-numbers language-js" mdui-tooltip="{content: 'js'}"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> jQuery Cookie <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"js/jquery.cookie.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Theme changing <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> $<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'styleCookie'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'style-light.css'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html, body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> <span class="token string">'#eeeeee'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//用户读取到上次访问时，网站的样式为style-light.css，全站背景为白色</span>
        <span class="token keyword">var</span> oMeta <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'meta'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//生成一个新的 &lt;meta>标签</span>
        oMeta<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'theme-color'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//给该&lt;meta>标签添加 name="theme-color"属性</span>
        oMeta<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">'#eeeeee'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//给该&lt;meta>标签添加 content = "#eeeeee"属性，状态栏颜色为白色</span>
        document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'head'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oMeta<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//将该&lt;meta>标签放置在&lt;head>&lt;/head>前</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'styleCookie'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'style.css'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html, body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> <span class="token string">'#222222'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//用户读取到上次访问时，网站的样式为style.css，全站背景为黑色</span>
        <span class="token keyword">var</span> oMeta <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'meta'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//生成一个新的 &lt;meta>标签</span>
        oMeta<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'theme-color'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//给该&lt;meta>标签添加 name="theme-color"属性</span>
        oMeta<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">'#222222'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//给该&lt;meta>标签添加 content = "#eeeeee"属性，状态栏颜色为黑色</span>
        document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'head'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oMeta<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//将该&lt;meta>标签放置在&lt;head>&lt;/head>前</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> jQuery Easing <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"js/jquery.easing.1.3.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>其中<code>oMeta</code>为变量，可以任意修改。</p>
</blockquote>
<p><strong> 由于Chrome每次加载只读取一次<code>&lt;meta&gt;</code>标签，所以更换主题后状态栏颜色必须刷新页面才能生效。</strong></p>
<p>然后就完成啦~</p>
<blockquote>
<p>然而这个东西卡了我3天。。。之前没有思路，甚至还将主站的主题变换功能去掉了。。。但现在终究是完成了~</p>
</blockquote>
<h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p>用户再次访问网站后，即可实现状态栏变色。</p>
<p>![状态栏变色效果][6]![状态栏变色效果][7]<br>[6]: <a href="https://img.halyul.com/images/2017/03/15/o_1b7vip7o71i9710d6kofcs482a.png" target="_blank" rel="noopener">https://img.halyul.com/images/2017/03/15/o_1b7vip7o71i9710d6kofcs482a.png</a><br>[7]: <a href="https://img.halyul.com/images/2017/03/15/o_1b7vipr5g4g3tnig521disqh8a.png" target="_blank" rel="noopener">https://img.halyul.com/images/2017/03/15/o_1b7vipr5g4g3tnig521disqh8a.png</a></p>
<p>从源代码也可以看到在</p>
<pre class="line-numbers language-js" mdui-tooltip="{content: 'js'}"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> jQuery Easing <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"js/jquery.easing.1.3.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>后多了一行黑色状态栏的代码</p>
<pre class="line-numbers language-html" mdui-tooltip="{content: 'html'}"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>theme-color<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#222222<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>或是白色状态栏的代码</p>
<pre class="line-numbers language-html" mdui-tooltip="{content: 'html'}"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>theme-color<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#eeeeee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;主页都不知道给我换了多少次了，用不上了嗯。&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="https://blog.halyul.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Android" scheme="https://blog.halyul.com/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>实现主站静态主题更换后，Android手机状态栏随同变色功能</title>
    <link href="https://blog.halyul.com/posts/main-theme-changing/"/>
    <id>https://blog.halyul.com/posts/main-theme-changing/</id>
    <published>2016-12-31T10:58:00.000Z</published>
    <updated>2016-12-31T13:20:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>主页都不知道给我换了多少次了，用不上了嗯。<br><a id="more"></a></p>
<h2 id="缘由"><a href="#缘由" class="headerlink" title="缘由"></a>缘由</h2><h3 id="大背景"><a href="#大背景" class="headerlink" title="大背景"></a>大背景</h3><p>Android在KitKat时代加入了变色状态栏，而Chrome在版本v39可以通过读取网页中<code>&lt;meta name=&quot;theme-color&quot; content=&quot;#3F51B5&quot;&gt;</code> 这段位于<code>&lt;head&gt;&lt;/head&gt;</code>前的代码实现改变状态栏颜色及地址栏颜色。</p>
<p>![状态栏变色效果][2]![状态栏变色效果][3]<br>[2]: //img.halyul.com/images/2017/03/15/o_1b7viobs21q6h1b0h1p5v13gf1fmra.png<br>[3]: <a href="https://img.halyul.com/images/2017/03/15/o_1b7vioo0s1re04bb1ld73hfgr6a.png" target="_blank" rel="noopener">https://img.halyul.com/images/2017/03/15/o_1b7vioo0s1re04bb1ld73hfgr6a.png</a></p>
<p>来源：[Chrome v39 On Lollipop Supports Custom Multitasking Header/Status Bar Colors With A Simple HTML Tag - Android Police][4]<br>[4]: <a href="http://www.androidpolice.com/2014/11/10/chrome-v39-on-lollipop-supports-custom-multitasking-headerstatus-bar-colors-with-a-simple-html-tag/" target="_blank" rel="noopener">http://www.androidpolice.com/2014/11/10/chrome-v39-on-lollipop-supports-custom-multitasking-headerstatus-bar-colors-with-a-simple-html-tag/</a></p>
<h3 id="小背景"><a href="#小背景" class="headerlink" title="小背景"></a>小背景</h3><p>我的[主站][1]网页代码中有以下几段：<br>[1]: //halyul.cc</p>
<pre class="line-numbers language-js" mdui-tooltip="{content: 'js'}"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> jQuery Cookie <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"js/jquery.cookie.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> $<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'styleCookie'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'style-light.css'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html, body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> <span class="token string">'#eeeeee'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//用户读取到上次访问时，网站的样式为style-light.css，全站背景为白色</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'styleCookie'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'style.css'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html, body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> <span class="token string">'#222222'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//用户读取到上次访问时，网站的样式为style.css，全站背景为黑色</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> jQuery Easing <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"js/jquery.easing.1.3.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>

<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这几段是涉及到了主页右上角的主题变换开关——黑白风格的变换。</p>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><p>而作为Androider我，必须得实现状态栏变色啊！所以各种度娘后，找到了[方法][5]。<br>[5]: <a href="https://zhidao.baidu.com/question/936921982308974372.html" target="_blank" rel="noopener">https://zhidao.baidu.com/question/936921982308974372.html</a></p>
<p>我在源代码以及找到的方法的基础上，在上面的代码中添加以下代码：</p>
<pre class="line-numbers language-js" mdui-tooltip="{content: 'js'}"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> jQuery Cookie <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"js/jquery.cookie.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Theme changing <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>script<span class="token operator">></span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> $<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'styleCookie'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'style-light.css'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html, body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> <span class="token string">'#eeeeee'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//用户读取到上次访问时，网站的样式为style-light.css，全站背景为白色</span>
        <span class="token keyword">var</span> oMeta <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'meta'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//生成一个新的 &lt;meta>标签</span>
        oMeta<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'theme-color'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//给该&lt;meta>标签添加 name="theme-color"属性</span>
        oMeta<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">'#eeeeee'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//给该&lt;meta>标签添加 content = "#eeeeee"属性，状态栏颜色为白色</span>
        document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'head'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oMeta<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//将该&lt;meta>标签放置在&lt;head>&lt;/head>前</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">cookie</span><span class="token punctuation">(</span><span class="token string">'styleCookie'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'style.css'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'html, body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background'</span><span class="token punctuation">,</span> <span class="token string">'#222222'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//用户读取到上次访问时，网站的样式为style.css，全站背景为黑色</span>
        <span class="token keyword">var</span> oMeta <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'meta'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//生成一个新的 &lt;meta>标签</span>
        oMeta<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'theme-color'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//给该&lt;meta>标签添加 name="theme-color"属性</span>
        oMeta<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token string">'#222222'</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//给该&lt;meta>标签添加 content = "#eeeeee"属性，状态栏颜色为黑色</span>
        document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'head'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oMeta<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment" spellcheck="true">//将该&lt;meta>标签放置在&lt;head>&lt;/head>前</span>
    <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> jQuery Easing <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"js/jquery.easing.1.3.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>其中<code>oMeta</code>为变量，可以任意修改。</p>
</blockquote>
<p><strong> 由于Chrome每次加载只读取一次<code>&lt;meta&gt;</code>标签，所以更换主题后状态栏颜色必须刷新页面才能生效。</strong></p>
<p>然后就完成啦~</p>
<blockquote>
<p>然而这个东西卡了我3天。。。之前没有思路，甚至还将主站的主题变换功能去掉了。。。但现在终究是完成了~</p>
</blockquote>
<h2 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h2><p>用户再次访问网站后，即可实现状态栏变色。</p>
<p>![状态栏变色效果][6]![状态栏变色效果][7]<br>[6]: <a href="https://img.halyul.com/images/2017/03/15/o_1b7vip7o71i9710d6kofcs482a.png" target="_blank" rel="noopener">https://img.halyul.com/images/2017/03/15/o_1b7vip7o71i9710d6kofcs482a.png</a><br>[7]: <a href="https://img.halyul.com/images/2017/03/15/o_1b7vipr5g4g3tnig521disqh8a.png" target="_blank" rel="noopener">https://img.halyul.com/images/2017/03/15/o_1b7vipr5g4g3tnig521disqh8a.png</a></p>
<p>从源代码也可以看到在</p>
<pre class="line-numbers language-js" mdui-tooltip="{content: 'js'}"><code class="language-js"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> jQuery Easing <span class="token operator">--</span><span class="token operator">></span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"js/jquery.easing.1.3.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>后多了一行黑色状态栏的代码</p>
<pre class="line-numbers language-html" mdui-tooltip="{content: 'html'}"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>theme-color<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#222222<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>或是白色状态栏的代码</p>
<pre class="line-numbers language-html" mdui-tooltip="{content: 'html'}"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>theme-color<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#eeeeee<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;主页都不知道给我换了多少次了，用不上了嗯。&lt;br&gt;
    
    </summary>
    
      <category term="技术" scheme="https://blog.halyul.com/categories/%E6%8A%80%E6%9C%AF/"/>
    
    
      <category term="Android" scheme="https://blog.halyul.com/tags/Android/"/>
    
  </entry>
  
  <entry>
    <title>为Hexo的Material主题添加总图库以及分图库功能</title>
    <link href="https://blog.halyul.com/posts/add-gallery%20(copy)/"/>
    <id>https://blog.halyul.com/posts/add-gallery (copy)/</id>
    <published>2016-12-30T09:33:13.000Z</published>
    <updated>2016-12-30T12:11:36.000Z</updated>
    
    <content type="html"><![CDATA[<p>嗯现在博客换了主题这个用不上了惹。<br><a id="more"></a></p>
<h2 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h2><p>今天将整个[Material主题][1]研究了一遍，发现了这个主题自带图库，然而这个图库只能支持一个相册，想将相册分类是不可能的，故而稍加研究，自己添加了这个功能。</p>
<p>总图库由友情链接页面修改得来，子图库则为原图库页面。<br>[1]: <a href="https://material.vss.im/" target="_blank" rel="noopener">https://material.vss.im/</a> “Material主题”</p>
<h2 id="经过"><a href="#经过" class="headerlink" title="经过"></a>经过</h2><h3 id="添加总图库"><a href="#添加总图库" class="headerlink" title="添加总图库"></a>添加总图库</h3><h4 id="加入总图库入口"><a href="#加入总图库入口" class="headerlink" title="加入总图库入口"></a>加入总图库入口</h4><p>在主题文件夹下的<code>_config.yml</code>找到<code>pages</code>项，插入一行：<code>图库: &quot;/galleries/&quot;</code></p>
<blockquote>
<p>其中<code>图库</code>、<code>galleries</code>可修改。</p>
</blockquote>
<p>然后，在博客主目录的<code>source</code>文件夹中新建一个同名文件夹。</p>
<blockquote>
<p>例如我的文件夹名称为galleries。</p>
</blockquote>
<p>并新建一个<code>index.md</code>文件，加入以下代码：</p>
<pre class="line-numbers language-markdown" mdui-tooltip="{content: 'markdown'}"><code class="language-markdown"><span class="token hr punctuation">---</span>
title: 图库
date: 2016/12/30
<span class="token title important">layout: galleries
<span class="token punctuation">---</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><code>title</code> 为网页标题，<code>图库</code>可修改，<code>galleries</code>可修改，但必须与上面的一致。</p>
</blockquote>
<p>再新建一个<code>_data</code>文件夹（不可改名）</p>
<h4 id="添加代码"><a href="#添加代码" class="headerlink" title="添加代码"></a>添加代码</h4><p>进入主题文件夹的<code>layout</code>文件夹中，打开<code>post.ejs</code>文件，找一个自己喜欢的位置，添加下面的代码。</p>
<pre class="line-numbers language-ejs" mdui-tooltip="{content: 'ejs'}"><code class="language-ejs"><!-- Galleries start -->
<% } else if(page.layout == "galleries") { %>
<%- partial("_widget/page-galleries") %>
<!-- Galleries end -->
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>其中第二行中<code>galleries</code>以及第三行的<code>page-galleries</code>可以修改。</p>
</blockquote>
<p>然后在<code>_widget</code>文件夹中复制<code>page-links.ejs</code>文件一份，重命名为<code>page-galleries.ejs</code>，打开并找到第83、84、86、87、89行的<br><code>site.data.links</code>，替换为<code>site.data.galleries</code><br>，以及第87行<code>avatar</code>替换为<code>pic</code>。</p>
<blockquote>
<p><code>galleries</code>和<code>pic</code>可修改。</p>
</blockquote>
<h3 id="添加子图库"><a href="#添加子图库" class="headerlink" title="添加子图库"></a>添加子图库</h3><h4 id="加入子图库入口1"><a href="#加入子图库入口1" class="headerlink" title="加入子图库入口1"></a>加入子图库入口1</h4><p>进入博客主目录的<code>source/_data</code>文件夹中，新建一个<code>galleries.yml</code>文件，加入以下代码</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">Name</span><span class="token punctuation">:</span>
    <span class="token key atrule">link</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//example.com/gallery1
    <span class="token key atrule">pic</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//example.com/pic.png
    <span class="token key atrule">descr</span><span class="token punctuation">:</span> <span class="token string">"这是一个描述"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><code>Name</code>修改为你的子图库名称，<code>gallery1</code>为你的子图库名称（中文未测试，这个名称后面会用到），<code>pic</code>为缩略图。</p>
</blockquote>
<h4 id="添加代码-1"><a href="#添加代码-1" class="headerlink" title="添加代码"></a>添加代码</h4><p>进入主题文件夹的<code>layout</code>文件夹中，打开<code>layout.ejs</code>文件，在</p>
<pre class="line-numbers language-ejs" mdui-tooltip="{content: 'ejs'}"><code class="language-ejs"><% } else { %>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>前添加以下代码</p>
<pre class="line-numbers language-ejs" mdui-tooltip="{content: 'ejs'}"><code class="language-ejs"><!-- gallery1 start-->
<% } else if(page.layout == "gallery1") { %>
<%- partial("_widget/page-gallery1") %>
<!-- gallery1 end-->
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>进入<code>_widget</code>文件夹中复制<code>page-gallery.ejs</code>文件一份，重命名为<code>page-gallery1.ejs</code>，打开并找到第25、26、28、30行<br><code>site.data.gallery</code>，替换为<code>site.data.gallery1</code></p>
<blockquote>
<p><code>gallery1</code>均可修改，但必须与上面的一致。</p>
</blockquote>
<h4 id="加入子图库入口2"><a href="#加入子图库入口2" class="headerlink" title="加入子图库入口2"></a>加入子图库入口2</h4><p>在博客主目录的<code>source</code>文件夹中新建一个<code>gallery1</code>文件夹，并新建一个<code>index.md</code>文件，加入以下代码：</p>
<pre class="line-numbers language-markdown" mdui-tooltip="{content: 'markdown'}"><code class="language-markdown"><span class="token hr punctuation">---</span>
title: 子图库
date: 2016/12/30
<span class="token title important">layout: gallery1
<span class="token punctuation">---</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><code>title</code> 为网页标题及页面左下角标题，<code>子图库</code>可修改，<code>galleries</code>可修改，但必须与上面的一致。</p>
</blockquote>
<p>进入<code>_data</code>文件夹，新建一个<code>gallery1.yml</code>文件，加入以下代码：</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">Name</span><span class="token punctuation">:</span>
    <span class="token key atrule">full_link</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//example.com/pic1.png
    <span class="token key atrule">thumb_link</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//example.com/pic1<span class="token punctuation">-</span>thumb.png
    <span class="token key atrule">descr</span><span class="token punctuation">:</span> <span class="token string">"这是一个描述"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><code>Name</code>修改为你的一张照片名称，<code>full_link</code>为你的照片的连接，<code>thumb_link</code>为该照片的缩略图。添加多张图片，只需要根据上面的格式重复填写即可。</p>
</blockquote>
<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p>到这里完成了，自己去看看效果吧！<br>我的效果如下：</p>
<p>![总图库效果][2]</p>
<p>![子图库效果][3]<br>[2]: <a href="https://img.halyul.com/images/2017/03/15/o_1b7vimbuo745scekls1vj81b8ba.png" target="_blank" rel="noopener">https://img.halyul.com/images/2017/03/15/o_1b7vimbuo745scekls1vj81b8ba.png</a><br>[3]: <a href="https://img.halyul.com/images/2017/03/15/o_1b7vimqhl7oj112vsjg5pn7vfa.png" target="_blank" rel="noopener">https://img.halyul.com/images/2017/03/15/o_1b7vimqhl7oj112vsjg5pn7vfa.png</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;嗯现在博客换了主题这个用不上了惹。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>为Hexo的Material主题添加总图库以及分图库功能</title>
    <link href="https://blog.halyul.com/posts/add-gallery/"/>
    <id>https://blog.halyul.com/posts/add-gallery/</id>
    <published>2016-12-30T09:33:13.000Z</published>
    <updated>2016-12-30T12:11:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>嗯现在博客换了主题这个用不上了惹。<br><a id="more"></a></p>
<h2 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h2><p>今天将整个[Material主题][1]研究了一遍，发现了这个主题自带图库，然而这个图库只能支持一个相册，想将相册分类是不可能的，故而稍加研究，自己添加了这个功能。</p>
<p>总图库由友情链接页面修改得来，子图库则为原图库页面。<br>[1]: <a href="https://material.vss.im/" target="_blank" rel="noopener">https://material.vss.im/</a> “Material主题”</p>
<h2 id="经过"><a href="#经过" class="headerlink" title="经过"></a>经过</h2><h3 id="添加总图库"><a href="#添加总图库" class="headerlink" title="添加总图库"></a>添加总图库</h3><h4 id="加入总图库入口"><a href="#加入总图库入口" class="headerlink" title="加入总图库入口"></a>加入总图库入口</h4><p>在主题文件夹下的<code>_config.yml</code>找到<code>pages</code>项，插入一行：<code>图库: &quot;/galleries/&quot;</code></p>
<blockquote>
<p>其中<code>图库</code>、<code>galleries</code>可修改。</p>
</blockquote>
<p>然后，在博客主目录的<code>source</code>文件夹中新建一个同名文件夹。</p>
<blockquote>
<p>例如我的文件夹名称为galleries。</p>
</blockquote>
<p>并新建一个<code>index.md</code>文件，加入以下代码：</p>
<pre class="line-numbers language-markdown" mdui-tooltip="{content: 'markdown'}"><code class="language-markdown"><span class="token hr punctuation">---</span>
title: 图库
date: 2016/12/30
<span class="token title important">layout: galleries
<span class="token punctuation">---</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><code>title</code> 为网页标题，<code>图库</code>可修改，<code>galleries</code>可修改，但必须与上面的一致。</p>
</blockquote>
<p>再新建一个<code>_data</code>文件夹（不可改名）</p>
<h4 id="添加代码"><a href="#添加代码" class="headerlink" title="添加代码"></a>添加代码</h4><p>进入主题文件夹的<code>layout</code>文件夹中，打开<code>post.ejs</code>文件，找一个自己喜欢的位置，添加下面的代码。</p>
<pre class="line-numbers language-ejs" mdui-tooltip="{content: 'ejs'}"><code class="language-ejs"><!-- Galleries start -->
<% } else if(page.layout == "galleries") { %>
<%- partial("_widget/page-galleries") %>
<!-- Galleries end -->
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p>其中第二行中<code>galleries</code>以及第三行的<code>page-galleries</code>可以修改。</p>
</blockquote>
<p>然后在<code>_widget</code>文件夹中复制<code>page-links.ejs</code>文件一份，重命名为<code>page-galleries.ejs</code>，打开并找到第83、84、86、87、89行的<br><code>site.data.links</code>，替换为<code>site.data.galleries</code><br>，以及第87行<code>avatar</code>替换为<code>pic</code>。</p>
<blockquote>
<p><code>galleries</code>和<code>pic</code>可修改。</p>
</blockquote>
<h3 id="添加子图库"><a href="#添加子图库" class="headerlink" title="添加子图库"></a>添加子图库</h3><h4 id="加入子图库入口1"><a href="#加入子图库入口1" class="headerlink" title="加入子图库入口1"></a>加入子图库入口1</h4><p>进入博客主目录的<code>source/_data</code>文件夹中，新建一个<code>galleries.yml</code>文件，加入以下代码</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">Name</span><span class="token punctuation">:</span>
    <span class="token key atrule">link</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//example.com/gallery1
    <span class="token key atrule">pic</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//example.com/pic.png
    <span class="token key atrule">descr</span><span class="token punctuation">:</span> <span class="token string">"这是一个描述"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><code>Name</code>修改为你的子图库名称，<code>gallery1</code>为你的子图库名称（中文未测试，这个名称后面会用到），<code>pic</code>为缩略图。</p>
</blockquote>
<h4 id="添加代码-1"><a href="#添加代码-1" class="headerlink" title="添加代码"></a>添加代码</h4><p>进入主题文件夹的<code>layout</code>文件夹中，打开<code>layout.ejs</code>文件，在</p>
<pre class="line-numbers language-ejs" mdui-tooltip="{content: 'ejs'}"><code class="language-ejs"><% } else { %>
<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>前添加以下代码</p>
<pre class="line-numbers language-ejs" mdui-tooltip="{content: 'ejs'}"><code class="language-ejs"><!-- gallery1 start-->
<% } else if(page.layout == "gallery1") { %>
<%- partial("_widget/page-gallery1") %>
<!-- gallery1 end-->
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>进入<code>_widget</code>文件夹中复制<code>page-gallery.ejs</code>文件一份，重命名为<code>page-gallery1.ejs</code>，打开并找到第25、26、28、30行<br><code>site.data.gallery</code>，替换为<code>site.data.gallery1</code></p>
<blockquote>
<p><code>gallery1</code>均可修改，但必须与上面的一致。</p>
</blockquote>
<h4 id="加入子图库入口2"><a href="#加入子图库入口2" class="headerlink" title="加入子图库入口2"></a>加入子图库入口2</h4><p>在博客主目录的<code>source</code>文件夹中新建一个<code>gallery1</code>文件夹，并新建一个<code>index.md</code>文件，加入以下代码：</p>
<pre class="line-numbers language-markdown" mdui-tooltip="{content: 'markdown'}"><code class="language-markdown"><span class="token hr punctuation">---</span>
title: 子图库
date: 2016/12/30
<span class="token title important">layout: gallery1
<span class="token punctuation">---</span></span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><code>title</code> 为网页标题及页面左下角标题，<code>子图库</code>可修改，<code>galleries</code>可修改，但必须与上面的一致。</p>
</blockquote>
<p>进入<code>_data</code>文件夹，新建一个<code>gallery1.yml</code>文件，加入以下代码：</p>
<pre class="line-numbers language-yaml" mdui-tooltip="{content: 'yaml'}"><code class="language-yaml"><span class="token key atrule">Name</span><span class="token punctuation">:</span>
    <span class="token key atrule">full_link</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//example.com/pic1.png
    <span class="token key atrule">thumb_link</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//example.com/pic1<span class="token punctuation">-</span>thumb.png
    <span class="token key atrule">descr</span><span class="token punctuation">:</span> <span class="token string">"这是一个描述"</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<blockquote>
<p><code>Name</code>修改为你的一张照片名称，<code>full_link</code>为你的照片的连接，<code>thumb_link</code>为该照片的缩略图。添加多张图片，只需要根据上面的格式重复填写即可。</p>
</blockquote>
<h2 id="结果"><a href="#结果" class="headerlink" title="结果"></a>结果</h2><p>到这里完成了，自己去看看效果吧！<br>我的效果如下：</p>
<p>![总图库效果][2]</p>
<p>![子图库效果][3]<br>[2]: <a href="https://img.halyul.com/images/2017/03/15/o_1b7vimbuo745scekls1vj81b8ba.png" target="_blank" rel="noopener">https://img.halyul.com/images/2017/03/15/o_1b7vimbuo745scekls1vj81b8ba.png</a><br>[3]: <a href="https://img.halyul.com/images/2017/03/15/o_1b7vimqhl7oj112vsjg5pn7vfa.png" target="_blank" rel="noopener">https://img.halyul.com/images/2017/03/15/o_1b7vimqhl7oj112vsjg5pn7vfa.png</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;嗯现在博客换了主题这个用不上了惹。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>你好，Hexo！</title>
    <link href="https://blog.halyul.com/posts/hello-hexo%20(copy)/"/>
    <id>https://blog.halyul.com/posts/hello-hexo (copy)/</id>
    <published>2016-12-29T15:00:00.000Z</published>
    <updated>2016-12-31T12:10:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>今天终于将自己的博客建立了起来，虽然过程很曲折，但终归完成了！<br><a id="more"></a><br>看来我要对我用到的教程全部备份一次，还要把部分资源丢到<a href="https://github.com/halyul" title="我的Github" target="_blank" rel="noopener">我的Github</a>上。。总觉得自己打开了一个无底洞。。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天终于将自己的博客建立了起来，虽然过程很曲折，但终归完成了！&lt;br&gt;
    
    </summary>
    
      <category term="杂" scheme="https://blog.halyul.com/categories/%E6%9D%82/"/>
    
    
      <category term="Hexo" scheme="https://blog.halyul.com/tags/Hexo/"/>
    
  </entry>
  
  <entry>
    <title>你好，Hexo！</title>
    <link href="https://blog.halyul.com/posts/hello-hexo/"/>
    <id>https://blog.halyul.com/posts/hello-hexo/</id>
    <published>2016-12-29T15:00:00.000Z</published>
    <updated>2016-12-31T12:10:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>今天终于将自己的博客建立了起来，虽然过程很曲折，但终归完成了！<br><a id="more"></a><br>看来我要对我用到的教程全部备份一次，还要把部分资源丢到<a href="https://github.com/halyul" title="我的Github" target="_blank" rel="noopener">我的Github</a>上。。总觉得自己打开了一个无底洞。。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天终于将自己的博客建立了起来，虽然过程很曲折，但终归完成了！&lt;br&gt;
    
    </summary>
    
      <category term="杂" scheme="https://blog.halyul.com/categories/%E6%9D%82/"/>
    
    
      <category term="Hexo" scheme="https://blog.halyul.com/tags/Hexo/"/>
    
  </entry>
  
</feed>
